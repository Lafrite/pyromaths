<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pyromaths.classes.PolynomesCollege &mdash; documentation Pyromaths 14.05</title>
    
    <link rel="stylesheet" href="../../../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '14.05',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/translations.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="documentation Pyromaths 14.05" href="../../../index.html" />
    <link rel="up" title="Code du module" href="../../index.html" /> 
  </head>
  <body>
      <div class="header"><img class="rightlogo" src="../../../_static/bandeau.png" alt="Logo"/><h1 class="heading"><a href="../../../index.html">
          <span>documentation Pyromaths 14.05</span></a></h1>
        <h2 class="heading"><span>pyromaths.classes.PolynomesCollege</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        <a class="uplink" href="../../../index.html">Contenu</a>
        </p>

      </div>
      <div class="content">
        
        
  <h1>Code source de pyromaths.classes.PolynomesCollege</h1><div class="highlight"><pre>
<span class="c">#!/usr/bin/python</span>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="c">#</span>
<span class="c"># Pyromaths</span>
<span class="c"># Un programme en Python qui permet de créer des fiches d&#39;exercices types de</span>
<span class="c"># mathématiques niveau collège ainsi que leur corrigé en LaTeX.</span>
<span class="c"># Copyright (C) 2006 -- Jérôme Ortais (jerome.ortais@pyromaths.org)</span>
<span class="c">#</span>
<span class="c"># This program is free software; you can redistribute it and/or modify</span>
<span class="c"># it under the terms of the GNU General Public License as published by</span>
<span class="c"># the Free Software Foundation; either version 2 of the License, or</span>
<span class="c"># (at your option) any later version.</span>
<span class="c">#</span>
<span class="c"># This program is distributed in the hope that it will be useful,</span>
<span class="c"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="c"># GNU General Public License for more details.</span>
<span class="c">#</span>
<span class="c"># You should have received a copy of the GNU General Public License</span>
<span class="c"># along with this program; if not, write to the Free Software</span>
<span class="c"># Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA</span>
<span class="c">#</span>
<span class="kn">from</span> <span class="nn">pyromaths.outils.decimaux</span> <span class="kn">import</span> <span class="n">decimaux</span>
<span class="kn">from</span> <span class="nn">pyromaths.outils</span> <span class="kn">import</span> <span class="n">Priorites3</span>
<span class="kn">from</span> <span class="nn">pyromaths.classes.Fractions</span> <span class="kn">import</span> <span class="n">Fraction</span>

<div class="viewcode-block" id="Polynome"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome">[docs]</a><span class="k">class</span> <span class="nc">Polynome</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Cette classe crée la notion de polynômes.</span>

<span class="sd">        &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">        &gt;&gt;&gt; Polynome([[2,2],[3,1],[4,0]], &#39;z&#39;)</span>
<span class="sd">        Polynome([[2, 2], [3, 1], [4, 0]], &quot;z&quot;, 0)</span>
<span class="sd">        &gt;&gt;&gt; Polynome(&quot;2y^2+3y+4&quot;)</span>
<span class="sd">        Polynome([[2, 2], [3, 1], [4, 0]], &quot;y&quot;, 0)</span>

<span class="sd">    Les variables e, i, j, l, o, O sont à éviter pour des raisons de lisibilité (l, o, O) ou parce qu&#39;elles</span>
<span class="sd">    sont utilisées comme constantes (e, i, j).</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Polynome.__init__"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">monomes</span><span class="p">,</span> <span class="n">var</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">details</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Crée un polynôme. Si ``var == None`` alors la variable est ``x``.</span>

<span class="sd">        *details* donne le niveau de détails attendus dans les développements et réductions :</span>

<span class="sd">        - 0 : pas de détails : 3x+4x =&gt; 7x</span>
<span class="sd">        - 1 : ordonne avant de réduire</span>
<span class="sd">        - 2 : ordonne puis factorise les réductions : 3x+4x=(3+4)x</span>
<span class="sd">        - 3 : comme 2 et détaille les produits : 2x*3x=2*3*x*x</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">            &gt;&gt;&gt; Polynome([[2,2],[3,1],[4,0]], &#39;z&#39;)</span>
<span class="sd">            Polynome([[2, 2], [3, 1], [4, 0]], &quot;z&quot;, 0)</span>
<span class="sd">            &gt;&gt;&gt; Polynome(&quot;2y^2+3y+4&quot;)</span>
<span class="sd">            Polynome([[2, 2], [3, 1], [4, 0]], &quot;y&quot;, 0)</span>
<span class="sd">            &gt;&gt;&gt; Polynome([[1, 1], [2, 2]])</span>
<span class="sd">            Polynome([[1, 1], [2, 2]], &quot;x&quot;, 0)</span>
<span class="sd">            &gt;&gt;&gt; Polynome(&quot;Fraction(1,7)x^2-Fraction(3,8)x-1&quot;)</span>
<span class="sd">            Polynome([[Fraction(1, 7), 2], [Fraction(-3, 8), 1], [-1, 0]], &quot;x&quot;, 0)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">monomes</span> <span class="o">=</span> <span class="n">monomes</span> <span class="ow">or</span> <span class="s">&#39;0&#39;</span>  <span class="c"># monômes du polynôme, par défaut un polynôme nul</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">monomes</span><span class="p">,</span> <span class="n">Polynome</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">monomes</span> <span class="o">=</span> <span class="n">monomes</span><span class="o">.</span><span class="n">monomes</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">var</span> <span class="o">=</span> <span class="n">monomes</span><span class="o">.</span><span class="n">var</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">details</span> <span class="o">=</span> <span class="n">monomes</span><span class="o">.</span><span class="n">details</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">monomes</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span>
            <span class="c"># Gère la construction des polynôme à partir d&#39;une chaîne de caractères</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">details</span> <span class="o">=</span> <span class="n">details</span>
            <span class="n">listmonomes</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">splitted</span> <span class="o">=</span> <span class="n">Priorites3</span><span class="o">.</span><span class="n">splitting</span><span class="p">(</span><span class="n">monomes</span><span class="p">)</span>
            <span class="n">m_coef</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">coef</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;&#39;</span>
            <span class="k">while</span> <span class="n">splitted</span><span class="p">:</span>
                <span class="n">extract</span> <span class="o">=</span> <span class="n">splitted</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">extract</span> <span class="ow">in</span> <span class="s">&#39;+-&#39;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">m_coef</span><span class="p">:</span>
                        <span class="n">listmonomes</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">m_coef</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
                        <span class="n">m_coef</span> <span class="o">=</span> <span class="bp">None</span>
                    <span class="n">coef</span> <span class="o">=</span> <span class="n">extract</span>
                <span class="k">elif</span> <span class="n">Priorites3</span><span class="o">.</span><span class="n">EstNombre</span><span class="p">(</span><span class="n">extract</span><span class="p">):</span>
                    <span class="n">m_coef</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">coef</span> <span class="o">+</span> <span class="n">extract</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">var</span> <span class="ow">and</span> <span class="n">extract</span> <span class="o">!=</span> <span class="n">var</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">u&#39;Le nom de la variable (</span><span class="si">%s</span><span class="s">) est incorrect pour le Polynôme </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">monomes</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">var</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> <span class="n">var</span> <span class="o">=</span> <span class="n">extract</span>
                    <span class="k">if</span> <span class="n">splitted</span> <span class="ow">and</span> <span class="n">splitted</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;^&#39;</span><span class="p">:</span>
                        <span class="n">splitted</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s">&#39;^&#39;</span><span class="p">)</span>
                        <span class="n">m_deg</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">splitted</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">m_deg</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">m_coef</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">coef</span> <span class="o">==</span> <span class="s">&#39;-&#39;</span><span class="p">:</span>
                            <span class="n">m_coef</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">m_coef</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="n">listmonomes</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">m_coef</span><span class="p">,</span> <span class="n">m_deg</span><span class="p">])</span>
                    <span class="n">m_coef</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">if</span> <span class="n">m_coef</span><span class="p">:</span> <span class="n">listmonomes</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">m_coef</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">listmonomes</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">monomes</span> <span class="o">=</span> <span class="n">listmonomes</span>
            <span class="k">else</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">monomes</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">var</span> <span class="o">=</span> <span class="n">var</span> <span class="ow">or</span> <span class="s">&#39;x&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># Supprime les monomes nuls :</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">monomes</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">monomes</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="n">monomes</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">monomes</span><span class="p">:</span> <span class="n">monomes</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">monomes</span> <span class="o">=</span> <span class="n">monomes</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">var</span> <span class="o">=</span> <span class="n">var</span> <span class="ow">or</span> <span class="s">&#39;x&#39;</span>  <span class="c"># Variable par défaut</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">details</span> <span class="o">=</span> <span class="n">details</span>

</div>
<div class="viewcode-block" id="Polynome.__repr__"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.__repr__">[docs]</a>    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;**repr**\ (*object*)</span>

<span class="sd">        Renvoie une chaîne de caractère représentant un :mod:`Polynome`</span>
<span class="sd">        évaluable pour créer un :mod:`Polynome`.</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">            &gt;&gt;&gt; repr(Polynome([[2,2],[3,1],[4,0]], &#39;z&#39;))</span>
<span class="sd">            &#39;Polynome([[2, 2], [3, 1], [4, 0]], &quot;z&quot;, 0)&#39;</span>

<span class="sd">        :rtype: string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s">&quot;Polynome(</span><span class="si">%s</span><span class="s">, </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s">, </span><span class="si">%s</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">monomes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Polynome.__str__"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.__str__">[docs]</a>    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">r&quot;&quot;&quot;**str**\ (*object*)</span>

<span class="sd">        Renvoie une version LaTeX du polynôme.</span>
<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">            &gt;&gt;&gt; str(Polynome([[2,2],[3,1],[4,0]], &#39;z&#39;))</span>
<span class="sd">            &#39;2\\,z^{2}+3\\,z+4&#39;</span>
<span class="sd">            &gt;&gt;&gt; str(Polynome(&quot;y^2-Fraction(3,2)y-1&quot;))</span>
<span class="sd">            &#39;y^{2}-\\dfrac{3}{2}\\,y-1&#39;</span>
<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.Fractions import Fraction</span>
<span class="sd">            &gt;&gt;&gt; print(Polynome([[1, 1], [Fraction(-5, 1), 0]]))</span>
<span class="sd">            x-5</span>

<span class="sd">        :rtype: string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">print_coef</span><span class="p">(</span><span class="n">coef</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;Gère le format du coef</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">coef</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">coef</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="s">&quot;+&quot;</span> <span class="o">+</span> <span class="n">decimaux</span><span class="p">(</span><span class="n">coef</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="n">decimaux</span><span class="p">(</span><span class="n">coef</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">coef</span><span class="p">,</span> <span class="n">Fraction</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">coef</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">coef</span><span class="o">.</span><span class="n">d</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="n">coef</span><span class="o">.</span><span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">coef</span><span class="o">.</span><span class="n">d</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s">&quot;-&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">Fraction</span><span class="p">(</span><span class="o">-</span><span class="n">coef</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="n">coef</span><span class="o">.</span><span class="n">d</span><span class="p">,</span> <span class="n">coef</span><span class="o">.</span><span class="n">code</span><span class="p">))</span>
                <span class="k">return</span> <span class="s">&quot;+&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">coef</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">coef</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">texte</span> <span class="o">=</span> <span class="s">&quot;(&quot;</span> <span class="o">+</span> <span class="s">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">Priorites3</span><span class="o">.</span><span class="n">texify</span><span class="p">([</span><span class="n">Priorites3</span><span class="o">.</span><span class="n">splitting</span><span class="p">(</span><span class="n">coef</span><span class="p">)]))</span> <span class="o">+</span> <span class="s">&quot;)&quot;</span>
                <span class="k">if</span> <span class="n">texte</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&quot;-&quot;</span><span class="p">:</span> <span class="k">return</span> <span class="s">&quot;+&quot;</span> <span class="o">+</span> <span class="n">texte</span>
                <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="n">texte</span>

        <span class="n">var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">monomes</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="c"># Monôme de degré au moins 2</span>
                    <span class="k">if</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="s">&quot;+&quot;</span> <span class="o">+</span> <span class="n">var</span> <span class="o">+</span> <span class="s">&quot;^{&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="s">&quot;}&quot;</span>
                    <span class="k">elif</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="s">&quot;-&quot;</span> <span class="o">+</span> <span class="n">var</span> <span class="o">+</span> <span class="s">&quot;^{&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="s">&quot;}&quot;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="n">print_coef</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s">r&quot;\,&quot;</span> <span class="o">+</span> <span class="n">var</span> <span class="o">+</span> <span class="s">&quot;^{&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="s">&quot;}&quot;</span>
                <span class="k">elif</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="c"># Monôme de degré 1</span>
                    <span class="k">if</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="s">&quot;+&quot;</span> <span class="o">+</span> <span class="n">var</span>
                    <span class="k">elif</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="s">&quot;-&quot;</span> <span class="o">+</span> <span class="n">var</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="n">print_coef</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s">r&quot;\,&quot;</span> <span class="o">+</span> <span class="n">var</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c"># Monôme de degré 0</span>
                    <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="n">print_coef</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="c"># supprime le + en début de séquence</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s">&quot;+&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;0&quot;</span>
        <span class="k">return</span> <span class="n">s</span>
</div>
<div class="viewcode-block" id="Polynome.__call__"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.__call__">[docs]</a>    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">valeur</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;**__call__**\ (*object*\ ,*valeur*)</span>

<span class="sd">        ``p.__call__(valeur)`` est équivalent à ``p(valeur)``</span>
<span class="sd">        Retourne l&#39;expression numérique du polynôme pour sa variable égale à</span>
<span class="sd">        valeur.</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">            &gt;&gt;&gt; Polynome(&quot;4+x-x^2+x^3-2x^5&quot;)(-5)</span>
<span class="sd">            &#39;4-5-(-5)**2+(-5)**3-2*(-5)**5&#39;</span>

<span class="sd">        :param: valeur</span>
<span class="sd">        :type: integer, float or Fraction</span>
<span class="sd">        :rtype: string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">Polynome</span><span class="o">.</span><span class="n">degre</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">monomes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">valeur</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">retour</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">monomes</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="n">retour</span> <span class="o">+=</span> <span class="s">&#39;+</span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">retour</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s">&#39;+&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;+-&#39;</span><span class="p">,</span> <span class="s">&#39;-&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">valeur</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">valeur</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span> <span class="n">nb</span> <span class="o">=</span> <span class="s">&quot;(</span><span class="si">%s</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="n">valeur</span>
        <span class="k">else</span><span class="p">:</span> <span class="n">nb</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">valeur</span><span class="p">)</span>
        <span class="n">retour</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">monomes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="n">retour</span> <span class="o">+=</span> <span class="s">&#39;+</span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">retour</span> <span class="o">+=</span> <span class="s">&#39;+</span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">valeur</span>
                <span class="k">elif</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">retour</span> <span class="o">+=</span> <span class="s">&#39;-&#39;</span> <span class="o">+</span> <span class="n">nb</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">retour</span> <span class="o">+=</span> <span class="s">&#39;+</span><span class="si">%r</span><span class="s">*&#39;</span> <span class="o">%</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">nb</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">retour</span> <span class="o">+=</span> <span class="s">&#39;+&#39;</span> <span class="o">+</span> <span class="n">nb</span> <span class="o">+</span> <span class="s">&#39;**</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">elif</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">retour</span> <span class="o">+=</span> <span class="s">&#39;-&#39;</span> <span class="o">+</span> <span class="n">nb</span> <span class="o">+</span> <span class="s">&#39;**</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">retour</span> <span class="o">+=</span> <span class="s">&#39;+</span><span class="si">%r</span><span class="s">*&#39;</span> <span class="o">%</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">nb</span> <span class="o">+</span> <span class="s">&#39;**</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">retour</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s">&#39;+&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;+-&#39;</span><span class="p">,</span> <span class="s">&#39;-&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Polynome.__getitem__"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.__getitem__">[docs]</a>    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*object*\ .\ **__getitem__**\ (*integer*)</span>

<span class="sd">        Renvoie le i ème monome du polynôme.</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">            &gt;&gt;&gt; Polynome(&quot;2y+3y^2+4&quot;)[1]</span>
<span class="sd">            [3, 2]</span>

<span class="sd">        :rtype: list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">monomes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Polynome.__delitem__"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.__delitem__">[docs]</a>    <span class="k">def</span> <span class="nf">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*object*\ .\ **__delitem__**\ (*integer*)</span>

<span class="sd">        Renvoie le polynôme privé du i ème monome.</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">            &gt;&gt;&gt; p = Polynome(&quot;2y+3y^2+4&quot;)</span>
<span class="sd">            &gt;&gt;&gt; del p[1]</span>
<span class="sd">            &gt;&gt;&gt; p</span>
<span class="sd">            Polynome([[2, 1], [4, 0]], &quot;y&quot;, 0)</span>

<span class="sd">        :rtype: Polynome</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">monomes</span>
        <span class="k">del</span> <span class="n">m</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">Polynome</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Polynome.__iadd__"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.__iadd__">[docs]</a>    <span class="k">def</span> <span class="nf">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*object*\ .\ **__iadd__**\ (*other*)</span>

<span class="sd">        ``p.__iadd__(q)`` est équivalent à ``p += q``</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">            &gt;&gt;&gt; p=Polynome(&quot;2y+3y^2+4&quot;)</span>
<span class="sd">            &gt;&gt;&gt; p += Polynome(&#39;-y+6&#39;)</span>
<span class="sd">            &gt;&gt;&gt; p</span>
<span class="sd">            Polynome([[2, 1], [3, 2], [4, 0], [-1, 1], [6, 0]], &quot;y&quot;, 0)</span>

<span class="sd">        :rtype: Polynome</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">other</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_other</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="n">m1</span><span class="p">,</span> <span class="n">m2</span> <span class="o">=</span> <span class="p">[</span><span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">monomes</span><span class="p">],</span> <span class="p">[</span><span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">monomes</span><span class="p">]</span>
        <span class="n">m</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">m1</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">m2</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">monomes</span> <span class="ow">in</span> <span class="n">m1</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">monomes</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">m</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">monomes</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Polynome</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Polynome.__eq__"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.__eq__">[docs]</a>    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*object*\ .\ **__eq__**\ (*other*)</span>

<span class="sd">        ``p.__eq__(q)`` est équivalent à ``p == q``</span>
<span class="sd">        Renvoie True si deux polynômes sont égaux. Ne tient pas compte de</span>
<span class="sd">        l&#39;ordre des monômes.</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">            &gt;&gt;&gt; Polynome(&quot;2y+3y^2+4&quot;) == Polynome(&#39;-y+6&#39;)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; Polynome(&#39;3x+5x+4&#39;)== Polynome(&#39;8x+4&#39;)</span>
<span class="sd">            False</span>

<span class="sd">        :rtype: boolean</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">other</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_other</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">monomes</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="o">==</span> \
               <span class="nb">sorted</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">monomes</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</div>
<div class="viewcode-block" id="Polynome.__ne__"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.__ne__">[docs]</a>    <span class="k">def</span> <span class="nf">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*object*\ .\ **__ne__**\ (*other*)</span>

<span class="sd">        ``p.__ne__(q)`` est équivalent à ``p != q``</span>
<span class="sd">        Renvoie True si deux polynômes sont différents. Ne tient pas compte de</span>
<span class="sd">        l&#39;ordre des monômes.</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">            &gt;&gt;&gt; Polynome(&quot;2y+3y^2+4&quot;) != Polynome(&#39;-y+6&#39;)</span>
<span class="sd">            True</span>

<span class="sd">        :rtype: boolean</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span> <span class="o">==</span> <span class="n">other</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Polynome.__add__"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.__add__">[docs]</a>    <span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">others</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*object*\ .\ **__add__**\ (*\ \*others*)</span>

<span class="sd">        ``p.__add__(q)`` est équivalent à ``p + q``  calcule la somme de</span>
<span class="sd">        polynômes.</span>

<span class="sd">        *other* peut être une chaîne représentant un polynôme.</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">            &gt;&gt;&gt; Polynome(&quot;2y+3y^2+4&quot;, details=2)+Polynome(&#39;-y+6&#39;, details=2)</span>
<span class="sd">            Polynome([[3, 2], [2, 1], [-1, 1], [4, 0], [6, 0]], &quot;y&quot;, 2)</span>

<span class="sd">        :param: other</span>
<span class="sd">        :type: Polynome ou string *évaluable comme Polynome*</span>
<span class="sd">        :rtype: Polynome</span>
<span class="sd">        &quot;&quot;&quot;</span>
<span class="c">#         if isinstance(other, basestring):</span>
<span class="c">#             other = eval(other)</span>
        <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">others</span><span class="p">:</span>
            <span class="n">other</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_other</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
            <span class="bp">self</span> <span class="o">+=</span><span class="n">other</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">nreduction</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Polynome.__radd__"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.__radd__">[docs]</a>    <span class="k">def</span> <span class="nf">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*object*\ .\ **__radd__**\ (*other*)</span>

<span class="sd">        ``p.__radd__(q)`` est équivalent à ``q + p``</span>

<span class="sd">        &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">        &gt;&gt;&gt; from pyromaths.classes.Fractions import Fraction</span>
<span class="sd">        &gt;&gt;&gt; Fraction(5,4)+Polynome(&quot;3x&quot;)</span>
<span class="sd">        Polynome([[3, 1], [Fraction(5, 4), 0]], &quot;x&quot;, 0)</span>

<span class="sd">        :param: other</span>
<span class="sd">        :type: Polynome ou string *évaluable comme Polynome*</span>
<span class="sd">        :rtype: Polynome</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="n">other</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_other</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">other</span> <span class="o">+</span> <span class="bp">self</span>
</div>
<div class="viewcode-block" id="Polynome.__sub__"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.__sub__">[docs]</a>    <span class="k">def</span> <span class="nf">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">others</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*object*\ .\ **__sub__**\ (*other*)</span>

<span class="sd">        ``p.__sub__(q)`` est équivalent à ``p + q``  calcule la somme de</span>
<span class="sd">        polynômes.</span>

<span class="sd">        *other* peut être une chaîne représentant un polynôme.</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">            &gt;&gt;&gt; Polynome(&quot;2y+3y^2+4&quot;)-Polynome(&#39;-y+6&#39;)</span>
<span class="sd">            &#39;Polynome([[2, 1], [3, 2], [4, 0]], &quot;y&quot;, 0)+Polynome([[1, 1], [-6, 0]], &quot;y&quot;, 0)&#39;</span>
<span class="sd">            &gt;&gt;&gt; Polynome(&quot;3y^2+2y+4&quot;)-Polynome(&#39;-y+6&#39;)</span>
<span class="sd">            &#39;Polynome([[3, 2], [2, 1], [4, 0]], &quot;y&quot;, 0)+Polynome([[1, 1], [-6, 0]], &quot;y&quot;, 0)&#39;</span>
<span class="sd">            &gt;&gt;&gt; Polynome(&quot;x+6&quot;)-Polynome(&quot;3x&quot;)</span>
<span class="sd">            Polynome([[-2, 1], [6, 0]], &quot;x&quot;, 0)</span>
<span class="sd">            &gt;&gt;&gt; Polynome(&quot;x+6&quot;,details=2)-Polynome(&quot;3x&quot;,details=2)</span>
<span class="sd">            Polynome([[1, 1], [-3, 1], [6, 0]], &quot;x&quot;, 2)</span>

<span class="sd">        :param: other</span>
<span class="sd">        :type: Polynome ou string *évaluable comme Polynome*</span>
<span class="sd">        :rtype: Polynome or string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">areduire</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ordonne</span><span class="p">()</span><span class="o">.</span><span class="n">reductible</span><span class="p">():</span> <span class="n">areduire</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">lother</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">details</span><span class="p">,</span> <span class="n">etapes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">,</span> <span class="bp">False</span>
        <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">others</span><span class="p">:</span>
            <span class="n">other</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_other</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">other</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">ordonne</span><span class="p">()</span><span class="o">.</span><span class="n">reductible</span><span class="p">():</span> <span class="n">areduire</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="n">details</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">details</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">details</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span> <span class="n">etapes</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="n">lother</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">areduire</span><span class="p">:</span>
            <span class="n">lother</span> <span class="o">=</span> <span class="p">[</span><span class="n">other</span><span class="o">.</span><span class="n">nreduction</span><span class="p">()</span> <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">]</span>
            <span class="n">lother</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nreduction</span><span class="p">())</span>
            <span class="k">return</span> <span class="s">&quot;-&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">repr</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">calcul</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%r</span><span class="s">+&quot;</span> <span class="o">%</span> <span class="bp">self</span> <span class="o">+</span><span class="s">&quot;+&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">repr</span><span class="p">(</span><span class="o">-</span><span class="n">other</span><span class="p">)</span> <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">etapes</span><span class="p">:</span> <span class="k">return</span> <span class="n">calcul</span>
            <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="nb">eval</span><span class="p">(</span><span class="n">calcul</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="Polynome.__rsub__"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.__rsub__">[docs]</a>    <span class="k">def</span> <span class="nf">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*object*\ .\ **__rsub__**\ (*other*)</span>

<span class="sd">        ``p.__rsub__(q)`` est équivalent à ``q - p``</span>

<span class="sd">        &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">        &gt;&gt;&gt; 1-Polynome([[-4, 1], [-9, 2], [-5, 0]], &quot;x&quot;)</span>
<span class="sd">        &#39;Polynome([[1, 0]], &quot;x&quot;, 0)+Polynome([[4, 1], [9, 2], [5, 0]], &quot;x&quot;, 0)&#39;</span>
<span class="sd">        &gt;&gt;&gt; from pyromaths.classes.Fractions import Fraction</span>
<span class="sd">        &gt;&gt;&gt; Fraction(5,4)-Polynome(&quot;3x&quot;)</span>
<span class="sd">        Polynome([[-3, 1], [Fraction(5, 4), 0]], &quot;x&quot;, 0)</span>
<span class="sd">        &gt;&gt;&gt; Fraction(5,4)-Polynome(&quot;-3x&quot;)</span>
<span class="sd">        Polynome([[3, 1], [Fraction(5, 4), 0]], &quot;x&quot;, 0)</span>

<span class="sd">        :param: other</span>
<span class="sd">        :type: Polynome ou string *évaluable comme Polynome*</span>
<span class="sd">        :rtype: Polynome</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">other</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_other</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c"># Cas où on soustrait un polynôme de longueur 1</span>
            <span class="n">other</span> <span class="o">+=</span> <span class="o">-</span><span class="bp">self</span>
            <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">ordonne</span><span class="p">()</span>
        <span class="k">return</span> <span class="s">&quot;</span><span class="si">%r</span><span class="s">+</span><span class="si">%r</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Polynome.__neg__"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.__neg__">[docs]</a>    <span class="k">def</span> <span class="nf">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*object*\ .\ **__neg__**\ ()</span>

<span class="sd">        ``p.__neg__()`` est équivalent à ``-p`` est équivalent à ``p = -p``</span>

<span class="sd">        **TODO :** Corriger ce dernier point ; p ne devrait pas être modifié</span>

<span class="sd">        Renvoie l&#39;opposé d&#39;un polynôme.</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">            &gt;&gt;&gt; -Polynome(&quot;2y+3y^2+4&quot;)</span>
<span class="sd">            Polynome([[-2, 1], [-3, 2], [-4, 0]], &quot;y&quot;, 0)</span>

<span class="sd">        :rtype: Polynome</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ordonne</span><span class="p">()</span><span class="o">.</span><span class="n">reductible</span><span class="p">():</span> <span class="k">return</span> <span class="s">&#39;-</span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nreduction</span><span class="p">()</span>
        <span class="n">m</span> <span class="o">=</span> <span class="p">[</span><span class="n">m1</span> <span class="k">for</span> <span class="n">m1</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">monomes</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">m</span><span class="p">)):</span>
            <span class="n">m</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">m</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">Polynome</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Polynome.__pos__"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.__pos__">[docs]</a>    <span class="k">def</span> <span class="nf">__pos__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*object*\ .\ **__pos__**\ ()</span>

<span class="sd">        ``p.__pos__()`` est équivalent à ``+p``</span>

<span class="sd">        Renvoie le polynôme.</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">            &gt;&gt;&gt; +Polynome(&quot;2y+3y^2+4&quot;)</span>
<span class="sd">            Polynome([[2, 1], [3, 2], [4, 0]], &quot;y&quot;, 0)</span>

<span class="sd">        :rtype: Polynome</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span>

</div>
<div class="viewcode-block" id="Polynome.__mul__"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.__mul__">[docs]</a>    <span class="k">def</span> <span class="nf">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">others</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*object*\ .\ **__mul__**\ (*other*)</span>

<span class="sd">        ``p.__mul__(q)`` est équivalent à ``p * q``</span>

<span class="sd">        Renvoie une chaîne de caractère ou un objet Polynôme dont les éléments</span>
<span class="sd">        sont :</span>

<span class="sd">        * le produit de ``p`` et ``q`` si ce sont deux monômes dont un au moins</span>
<span class="sd">          a pour coefficient 1.</span>
<span class="sd">        * le produit détaillé de ``p`` et ``q`` si ce sont deux monômes ne</span>
<span class="sd">          dépendant pas du cas précédent.</span>
<span class="sd">        * le développement par distributivité dans les autres cas</span>

<span class="sd">        si details est égal à 0, les produits dans les distributivités sont calculés immédiatement,</span>
<span class="sd">        sinon les produits sont explicités.</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">            &gt;&gt;&gt; Polynome(&#39;3x+4&#39;, details=0)*Polynome(&#39;2x+5&#39;, details=0)</span>
<span class="sd">            &#39;Polynome([[6, 2]], &quot;x&quot;, 0)+Polynome([[15, 1]], &quot;x&quot;, 0)+Polynome([[8, 1]], &quot;x&quot;, 0)+Polynome([[20, 0]], &quot;x&quot;, 0)&#39;</span>
<span class="sd">            &gt;&gt;&gt; Polynome(&#39;3x&#39;, details=1)*Polynome(&#39;2x+5&#39;, details=1)</span>
<span class="sd">            &#39;Polynome([[3, 1]], &quot;x&quot;, 1)*Polynome([[2, 1]], &quot;x&quot;, 1)+Polynome([[3, 1]], &quot;x&quot;, 1)*Polynome([[5, 0]], &quot;x&quot;, 1)&#39;</span>
<span class="sd">            &gt;&gt;&gt; Polynome(&#39;3x&#39;, details=3) * Polynome(&#39;2x&#39;, details=3)</span>
<span class="sd">            &quot;Polynome([[3, 0]], var = &#39;x&#39;, details=3)*Polynome([[1, 1]], var = &#39;x&#39;, details=3)*Polynome([[2, 0]], var = &#39;x&#39;, details=3)*Polynome([[1, 1]], var = &#39;x&#39;, details=3)&quot;</span>
<span class="sd">            &gt;&gt;&gt; Polynome(&#39;3&#39;, details=3)*Polynome(&#39;x&#39;, details=3)</span>
<span class="sd">            Polynome([[3, 1]], &quot;x&quot;, 3)</span>

<span class="sd">        :param: other</span>
<span class="sd">        :type: Polynome ou string *évaluable comme Polynome*</span>
<span class="sd">        :rtype: string ou Polynome</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">id_rem</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">):</span>
            <span class="sd">&#39;&#39;&#39;Renvoie 1, 2 ou 3 selon l&#39;identité remarquable trouvée, None sinon&#39;&#39;&#39;</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span> <span class="k">return</span> <span class="bp">None</span>
            <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">p1</span><span class="o">.</span><span class="n">ordonne</span><span class="p">(),</span> <span class="n">p2</span><span class="o">.</span><span class="n">ordonne</span><span class="p">()</span>
            <span class="n">m0</span> <span class="o">=</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span> <span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span>
            <span class="n">m1</span> <span class="o">=</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span> <span class="n">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span>
            <span class="k">if</span> <span class="n">p1</span> <span class="o">==</span> <span class="n">p2</span><span class="p">:</span>
                <span class="c"># 1ère ou 2ème identité remarquable</span>
                <span class="k">return</span> <span class="n">p1</span> <span class="o">**</span> <span class="mi">2</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">and</span> <span class="n">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="ow">and</span> <span class="p">(</span><span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span>\
                <span class="n">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="ow">or</span> <span class="p">(</span><span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
                <span class="c"># 3ème identité remarquable</span>
                <span class="k">if</span> <span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="n">poly</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%r</span><span class="s">**2-</span><span class="si">%r</span><span class="s">**2&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Polynome</span><span class="p">([</span><span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">),</span> \
                                            <span class="n">Polynome</span><span class="p">([</span><span class="n">m1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">poly</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%r</span><span class="s">**2-</span><span class="si">%r</span><span class="s">**2&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Polynome</span><span class="p">([</span><span class="n">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">),</span> \
                                            <span class="n">Polynome</span><span class="p">([</span><span class="n">m0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">))</span>
                <span class="k">return</span> <span class="n">poly</span>
            <span class="k">return</span> <span class="bp">None</span>

        <span class="k">if</span> <span class="bp">self</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="mi">0</span>
        <span class="n">lother</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">others</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">el</span><span class="o">.</span><span class="n">ordonne</span><span class="p">()</span><span class="o">.</span><span class="n">reductible</span><span class="p">():</span>
                <span class="c"># On commence par réduire la chaîne</span>
                <span class="k">return</span> <span class="s">&quot;*&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">repr</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">nreduction</span><span class="p">())</span> <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">])</span>

        <span class="n">lcoeff</span><span class="p">,</span> <span class="n">lexp</span><span class="p">,</span> <span class="n">reduire</span><span class="p">,</span> <span class="n">ordonne</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">True</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lother</span><span class="p">)):</span>
            <span class="n">lother</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_other</span><span class="p">(</span><span class="n">lother</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lother</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c"># c&#39;est un monôme, il est donc probablement réduit</span>
                <span class="n">coeff</span><span class="p">,</span> <span class="n">exp</span> <span class="o">=</span> <span class="n">lother</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">lother</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">coeff</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span> <span class="n">lcoeff</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coeff</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">exp</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span> <span class="n">lexp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">exp</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">coeff</span> <span class="o">!=</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">exp</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span> <span class="n">reduire</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="k">if</span> <span class="n">lexp</span> <span class="ow">and</span> <span class="n">exp</span> <span class="o">&lt;</span> <span class="n">lexp</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span> <span class="n">ordonne</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="k">if</span> <span class="n">lother</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="mi">0</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lother</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">lother</span><span class="p">):</span>
                <span class="c"># Ce n&#39;est pas un monôme, il va donc falloir utiliser la distributivité</span>
                <span class="c"># ou alors la chaine est fini et on calcule</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lother</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">lcoeff</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">lexp</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="c"># on a multiplié au moins 2 monômes auparavant</span>
                    <span class="k">if</span> <span class="n">lother</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">details</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">reduire</span><span class="p">:</span>
                        <span class="c"># TODO: cas où un coeff est une str</span>
                        <span class="c">#=======================================================</span>
                        <span class="c"># return &quot;*&quot;.join([repr(coeff) for coeff in lcoeff]) + &quot;*&quot; + \</span>
                        <span class="c">#     &quot;*&quot;.join([&quot;Polynome([[1, %s]], &#39;%s&#39;, %s)&quot; % (exp, self.var, self.details) for exp in lexp]) + \</span>
                        <span class="c">#     &quot;*&quot;.join([repr(other.nreduction()) for other in lother[i + 1:]])</span>
                        <span class="c">#=======================================================</span>
                        <span class="n">produit</span> <span class="o">=</span> <span class="p">[]</span>
                        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">j</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">j</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="n">produit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;*&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">&#39;Polynome([[</span><span class="si">%s</span><span class="s">, 0]], var = </span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s">, details=</span><span class="si">%s</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">j</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">j</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="n">j</span><span class="o">.</span><span class="n">details</span><span class="p">),</span> \
                                                <span class="s">&#39;Polynome([[1, </span><span class="si">%s</span><span class="s">]], var = </span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s">, details=</span><span class="si">%s</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">j</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">j</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="n">j</span><span class="o">.</span><span class="n">details</span><span class="p">)]))</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">produit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">j</span><span class="p">))</span>
                        <span class="k">return</span> <span class="s">&quot;*&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">produit</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">lother</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">details</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">ordonne</span><span class="p">:</span>
                        <span class="k">return</span> <span class="s">&quot;*&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">repr</span><span class="p">(</span><span class="n">coeff</span><span class="p">)</span> <span class="k">for</span> <span class="n">coeff</span> <span class="ow">in</span> <span class="n">lcoeff</span><span class="p">])</span> <span class="o">+</span> <span class="s">&quot;*&quot;</span> <span class="o">+</span> \
                            <span class="s">&quot;*&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">&quot;Polynome([[1, </span><span class="si">%s</span><span class="s">]], &#39;</span><span class="si">%s</span><span class="s">&#39;, </span><span class="si">%s</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">exp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">)</span> <span class="k">for</span> <span class="n">exp</span> <span class="ow">in</span> <span class="n">lexp</span><span class="p">])</span> <span class="o">+</span> \
                            <span class="s">&quot;*&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">repr</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">nreduction</span><span class="p">())</span> <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">lcoeff</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                        <span class="n">lexp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                        <span class="n">poly</span> <span class="o">=</span> <span class="n">Polynome</span><span class="p">([[</span><span class="nb">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">lcoeff</span><span class="p">),</span> \
                                          <span class="nb">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">,</span> <span class="n">lexp</span><span class="p">)]],</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">lother</span><span class="p">):</span> <span class="k">return</span> <span class="n">poly</span>
                        <span class="k">else</span><span class="p">:</span> <span class="k">return</span> \
                            <span class="s">&quot;*&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">repr</span><span class="p">(</span><span class="n">poly</span><span class="p">)]</span> <span class="o">+</span> <span class="p">[</span><span class="nb">repr</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">nreduction</span><span class="p">())</span> <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c"># On distribue :</span>
                    <span class="k">if</span> <span class="n">i</span><span class="p">:</span>
                        <span class="c"># on va utiliser la distributivité simple</span>
                        <span class="n">poly</span> <span class="o">=</span> <span class="n">Polynome</span><span class="p">([[</span><span class="n">coeff</span><span class="p">,</span> <span class="n">exp</span><span class="p">]],</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">)</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">produit</span> <span class="o">=</span> <span class="s">&quot;+&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">repr</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;*&quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">Polynome</span><span class="p">([</span><span class="n">other</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">))</span> <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>
                            <span class="k">if</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">lother</span><span class="p">):</span> <span class="n">produit</span> <span class="o">=</span> <span class="s">&quot;(&quot;</span> <span class="o">+</span> <span class="n">produit</span> <span class="o">+</span> <span class="s">&quot;)&quot;</span>
                            <span class="k">return</span> <span class="s">&quot;*&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">produit</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="nb">repr</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">nreduction</span><span class="p">())</span> <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]])</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">produit</span> <span class="o">=</span> <span class="s">&quot;+&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">repr</span><span class="p">(</span><span class="n">Polynome</span><span class="p">([[</span><span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">other</span><span class="p">[</span><span class="mi">1</span><span class="p">]]],</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">))</span> <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>
                            <span class="k">if</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">lother</span><span class="p">):</span> <span class="n">produit</span> <span class="o">=</span> <span class="s">&quot;(&quot;</span> <span class="o">+</span> <span class="n">produit</span> <span class="o">+</span> <span class="s">&quot;)&quot;</span>
                            <span class="k">return</span> <span class="s">&quot;*&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">produit</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="nb">repr</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">nreduction</span><span class="p">())</span> <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c"># le premier polynome est de longueur au moins 2</span>
                        <span class="n">produit</span> <span class="o">=</span> <span class="n">id_rem</span><span class="p">(</span><span class="n">lother</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lother</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                        <span class="k">if</span> <span class="n">produit</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
                            <span class="c"># Distributivité</span>
                            <span class="c"># TODO: Convertir (a-b) en (a+(-b)) pour details=3</span>
                            <span class="c">#===================================================</span>
                            <span class="c"># if self.details == 3:</span>
                            <span class="c">#     difference, produit = False, []</span>
                            <span class="c">#     for poly in lother:</span>
                            <span class="c">#         if len(poly) &gt; 1:</span>
                            <span class="c">#             for j in range(1, len(poly)):</span>
                            <span class="c">#                 if poly[j][0] &lt; 0:</span>
                            <span class="c">#                     difference = True</span>
                            <span class="c">#                     produit.append(&quot;(&quot; + &quot;+&quot;.join([&#39;Polynome(%s, var = \&#39;%s\&#39;, details=%s)&#39; % (poly[i], poly.var, poly.details) for i in range(len(poly))]) + &quot;)&quot;)</span>
                            <span class="c">#                     break</span>
                            <span class="c">#         if not difference: produit.append(repr(poly))</span>
                            <span class="c">#     if difference:</span>
                            <span class="c">#         return &quot;*&quot;.join(produit)</span>
                            <span class="c">#===================================================</span>

                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="n">produit</span> <span class="o">=</span> <span class="s">&quot;+&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">&quot;+&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">repr</span><span class="p">(</span><span class="n">Polynome</span><span class="p">([</span><span class="n">premier</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">))</span> <span class="o">+</span> \
                                                              <span class="s">&quot;*&quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">Polynome</span><span class="p">([</span><span class="n">second</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">))</span> \
                                                              <span class="k">for</span> <span class="n">second</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span> <span class="k">for</span> <span class="n">premier</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
                                <span class="k">if</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">lother</span><span class="p">):</span> <span class="n">produit</span> <span class="o">=</span> <span class="s">&quot;(&quot;</span> <span class="o">+</span> <span class="n">produit</span> <span class="o">+</span> <span class="s">&quot;)&quot;</span>
                                <span class="k">return</span> <span class="s">&quot;*&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">produit</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="nb">repr</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">nreduction</span><span class="p">())</span> <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:]])</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">produit</span> <span class="o">=</span> <span class="s">&quot;+&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">&quot;+&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">repr</span><span class="p">(</span><span class="n">Polynome</span><span class="p">([[</span><span class="n">premier</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">second</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">premier</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">second</span><span class="p">[</span><span class="mi">1</span><span class="p">]]],</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">))</span> \
                                                              <span class="k">for</span> <span class="n">second</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span> <span class="k">for</span> <span class="n">premier</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
                                <span class="k">if</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">lother</span><span class="p">):</span> <span class="n">produit</span> <span class="o">=</span> <span class="s">&quot;(&quot;</span> <span class="o">+</span> <span class="n">produit</span> <span class="o">+</span> <span class="s">&quot;)&quot;</span>
                                <span class="k">return</span> <span class="s">&quot;*&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">produit</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="nb">repr</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">nreduction</span><span class="p">())</span> <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:]])</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="c"># identité remarquable</span>
                            <span class="k">if</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">lother</span><span class="p">):</span> <span class="n">produit</span> <span class="o">=</span> <span class="s">&quot;(&quot;</span> <span class="o">+</span> <span class="n">produit</span> <span class="o">+</span> <span class="s">&quot;)&quot;</span>
                            <span class="k">return</span> <span class="s">&quot;*&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">produit</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="nb">repr</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">nreduction</span><span class="p">())</span> <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:]])</span>
</div>
<div class="viewcode-block" id="Polynome.__rmul__"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.__rmul__">[docs]</a>    <span class="k">def</span> <span class="nf">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Multiplication de *other* (qui n&#39;est pas un polynôme) par *self*</span>
<span class="sd">        (qui en est un)</span>

<span class="sd">        * Si *other* est une suite de produits de monômes, et *self* un polynôme</span>
<span class="sd">          de rang 1, on effectue toutes les multiplications en une fois</span>
<span class="sd">        * Sinon, on calcule d&#39;abord @other</span>

<span class="sd">        :param: other</span>
<span class="sd">        :type: Polynome ou string *évaluable comme Polynome*</span>
<span class="sd">        :rtype: string ou Polynome&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">Fraction</span><span class="p">)):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_other</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">other</span> <span class="o">*</span> <span class="bp">self</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="kn">from</span> <span class="nn">pyromaths.outils.Priorites3</span> <span class="kn">import</span> <span class="n">splitting</span>
            <span class="n">ls</span> <span class="o">=</span> <span class="n">splitting</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ls</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&quot;+&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">ls</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&quot;-&quot;</span><span class="p">):</span>
                <span class="c"># Réduire @other avant de faire le produit et vérifier s&#39;il faut</span>
                <span class="c"># des parenthèses autour de l&#39;expression @other</span>
                <span class="n">par</span><span class="p">,</span> <span class="n">besoin</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">False</span>
                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ls</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">ls</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;(&quot;</span><span class="p">:</span> <span class="n">par</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">elif</span> <span class="n">ls</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;)&quot;</span><span class="p">:</span> <span class="n">par</span> <span class="o">-=</span> <span class="mi">1</span>
                    <span class="k">elif</span> <span class="ow">not</span> <span class="n">par</span> <span class="ow">and</span> <span class="n">ls</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="ow">in</span> <span class="s">&quot;+-&quot;</span><span class="p">:</span>
                        <span class="n">besoin</span> <span class="o">=</span> <span class="bp">True</span>
                        <span class="k">break</span>
                <span class="k">if</span> <span class="n">besoin</span><span class="p">:</span> <span class="k">return</span> <span class="s">&quot;(&quot;</span> <span class="o">+</span> <span class="n">other</span> <span class="o">+</span> <span class="s">&quot;)*&quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="n">other</span> <span class="o">+</span> <span class="s">&quot;*&quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">other</span> <span class="o">+</span> <span class="s">&quot;*&quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ls</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="s">&quot;Polynome(&quot;</span> <span class="ow">in</span> <span class="n">ls</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">ls</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                            <span class="k">return</span> <span class="n">other</span> <span class="o">+</span> <span class="s">&quot;*&quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="n">Polynome</span><span class="o">.</span><span class="n">degre</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">ls</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="ow">or</span> <span class="n">i</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">ls</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">monomes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">ls</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="s">&quot;*&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">monomes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> <span class="n">ls</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="s">&quot;(&quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">monomes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s">&quot;, </span><span class="si">%s</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span> <span class="n">ls</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">monomes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">monomes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;*&quot;</span><span class="p">)</span>
                    <span class="n">ls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;Polynome([</span><span class="si">%s</span><span class="s">], </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s">, </span><span class="si">%s</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">monomes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]],</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">))</span>
                <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ls</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">u&quot;Type non prévu. Bogue en perspective !&quot;</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">_divide</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*object*\ .\ **div**\ (*other*)</span>

<span class="sd">        ``p.__div__(q)`` est équivalent à ``p / q``</span>

<span class="sd">        Renvoie (self // other, self % other) deux polynomes où le premier élément est le quotient et le second</span>
<span class="sd">        le reste de la division euclidienne de self par other.</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">            &gt;&gt;&gt; Polynome(&#39;3x+4&#39;, 0)._divide(Polynome(&#39;2x+5&#39;, 0))</span>
<span class="sd">            (Polynome([[Fraction(3, 2), 0]], &quot;x&quot;, 0), Polynome([[Fraction(-7, 2), 0]], &quot;x&quot;, 0))</span>
<span class="sd">            &gt;&gt;&gt; Polynome(&quot;x^4+2x^3+3x^2+5x+6&quot;)._divide(Polynome(&quot;7x+8&quot;))</span>
<span class="sd">            (Polynome([[Fraction(1, 7), 3], [Fraction(6, 49), 2], [Fraction(99, 343), 1], [Fraction(923, 2401), 0]], &quot;x&quot;, 0), Polynome([[Fraction(7022, 2401), 0]], &quot;x&quot;, 0))</span>

<span class="sd">        :param: other</span>
<span class="sd">        :type: Polynome ou string *évaluable comme Polynome*</span>
<span class="sd">        :rtype: Deux Polynome</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">other</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_other</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="n">quotient</span> <span class="o">=</span> <span class="n">Polynome</span><span class="p">([],</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">)</span>
        <span class="n">reste</span> <span class="o">=</span> <span class="n">Polynome</span><span class="o">.</span><span class="n">ordonne</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">diviseur</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">ordonne</span><span class="p">()</span>
        <span class="n">degre_diviseur</span> <span class="o">=</span> <span class="n">diviseur</span><span class="o">.</span><span class="n">degre</span><span class="p">()</span>
        <span class="k">while</span> <span class="n">reste</span><span class="o">.</span><span class="n">degre</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="n">degre_diviseur</span><span class="p">:</span>
            <span class="n">degre</span> <span class="o">=</span> <span class="n">reste</span><span class="o">.</span><span class="n">degre</span><span class="p">()</span> <span class="o">-</span> <span class="n">degre_diviseur</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">reste</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">Fraction</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">diviseur</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">Fraction</span><span class="p">):</span>
                <span class="n">coef</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">Priorites3</span><span class="o">.</span><span class="n">priorites</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%r</span><span class="s">/</span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">reste</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">diviseur</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]))[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">reste</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">%</span> <span class="n">diviseur</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="n">coef</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">reste</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">diviseur</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">coef</span> <span class="o">=</span> <span class="n">reste</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="n">diviseur</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">quotient</span><span class="o">.</span><span class="n">monomes</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">coef</span><span class="p">,</span> <span class="n">degre</span><span class="p">])</span>
            <span class="n">reste</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">Priorites3</span><span class="o">.</span><span class="n">priorites</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%r</span><span class="s">-Polynome([[</span><span class="si">%r</span><span class="s">, </span><span class="si">%s</span><span class="s">]], &quot;</span><span class="si">%s</span><span class="s">&quot;, </span><span class="si">%s</span><span class="s">)*</span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">reste</span><span class="p">,</span> <span class="n">coef</span><span class="p">,</span> <span class="n">degre</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">,</span> <span class="n">diviseur</span><span class="p">))[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">quotient</span><span class="o">.</span><span class="n">nreduction</span><span class="p">(</span><span class="bp">True</span><span class="p">),</span> <span class="n">reste</span>

<div class="viewcode-block" id="Polynome.__mod__"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.__mod__">[docs]</a>    <span class="k">def</span> <span class="nf">__mod__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        self % other</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">other</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_other</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="bp">NotImplemented</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">other</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">other</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">u&#39;Opération non valide : x % 0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">u&#39;Division non définie : 0 % 0&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_divide</span><span class="p">(</span><span class="n">other</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Polynome.__floordiv__"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.__floordiv__">[docs]</a>    <span class="k">def</span> <span class="nf">__floordiv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        self // other</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">other</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_other</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="bp">NotImplemented</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">other</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">other</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">u&#39;Opération non valide : x // 0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">u&#39;Division non définie : 0 // 0&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_divide</span><span class="p">(</span><span class="n">other</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Polynome.__len__"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.__len__">[docs]</a>    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*object*\ .\ **__len__**\ ()</span>

<span class="sd">        ``p.__len__()`` équivaut à ``len(p)`` et renvoie le nombre de monômes d&#39;un polynôme.</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">            &gt;&gt;&gt; len(Polynome(&quot;2y+3y^2+4&quot;))</span>
<span class="sd">            3</span>

<span class="sd">        :rtype: integer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">m</span> <span class="o">=</span> <span class="p">[</span><span class="n">m1</span> <span class="k">for</span> <span class="n">m1</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">monomes</span><span class="p">]</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">Polynome</span><span class="o">.</span><span class="n">ordonne</span><span class="p">(</span><span class="n">Polynome</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">))</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">monomes</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Polynome.degre"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.degre">[docs]</a>    <span class="k">def</span> <span class="nf">degre</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;**degre**\ (*object*)</span>

<span class="sd">        Retourne le degré d&#39;un polynôme, -1 pour le polynôme nul</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">            &gt;&gt;&gt; Polynome(&quot;2y+3y^2+4&quot;).degre()</span>
<span class="sd">            2</span>
<span class="sd">            &gt;&gt;&gt; Polynome(&#39;&#39;).degre()</span>
<span class="sd">            -1</span>

<span class="sd">        :rtype: integer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">nreduction</span><span class="p">(</span><span class="bp">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Polynome.__pow__"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.__pow__">[docs]</a>    <span class="k">def</span> <span class="nf">__pow__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*object*\ .\ **pow**\ (*integer*)</span>

<span class="sd">        ``p.__pow__(n)`` équivaut à ``p**n`` et renvoie le développement du</span>
<span class="sd">        polynôme p à la puissance n.</span>

<span class="sd">        * Si ``n == 1``, alors renvoie l&#39;objet Polynome ;</span>
<span class="sd">        * si ``n == 2``, alors renvoie une chaîne avec le développement en</span>
<span class="sd">          utilisant une identité remarquable ;</span>
<span class="sd">        * si ``n &gt; 1``, renvoie le développement en utilisant la formule du</span>
<span class="sd">          binôme de Newton.</span>

<span class="sd">        **TODO :** si ``n == 2`` et ``len(p) &gt; 2``, bug</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">            &gt;&gt;&gt; Polynome(&quot;2y+4&quot;)**2</span>
<span class="sd">            &#39;Polynome([[2, 1]], &quot;y&quot;, 0)**2+2*Polynome([[2, 1]], &quot;y&quot;, 0)*Polynome([[4, 0]], &quot;y&quot;, 0)+Polynome([[4, 0]], &quot;y&quot;, 0)**2&#39;</span>
<span class="sd">            &gt;&gt;&gt; Polynome(&quot;2y&quot;)**3</span>
<span class="sd">            Polynome([[8, 3]], &quot;y&quot;, 0)</span>

<span class="sd">        :rtype: string ou Polynome</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">other</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">a0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">monomes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">b0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">monomes</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">a0</span> <span class="o">*</span> <span class="n">b0</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">Polynome</span><span class="p">([[</span><span class="nb">abs</span><span class="p">(</span><span class="n">a0</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">monomes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]]],</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">)</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">Polynome</span><span class="p">([[</span><span class="nb">abs</span><span class="p">(</span><span class="n">b0</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">monomes</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]]],</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">p</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="s">&quot;</span><span class="si">%r</span><span class="s">**2-2*</span><span class="si">%r</span><span class="s">*</span><span class="si">%r</span><span class="s">+</span><span class="si">%r</span><span class="s">**2&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="s">&quot;</span><span class="si">%r</span><span class="s">**2+2*</span><span class="si">%r</span><span class="s">*</span><span class="si">%r</span><span class="s">+</span><span class="si">%r</span><span class="s">**2&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Polynome</span><span class="p">([[</span><span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">**</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">other</span><span class="p">]],</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span>
            <span class="k">for</span> <span class="n">dummy</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">other</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">result</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">result</span> <span class="o">*</span> <span class="bp">self</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">result</span>
</div>
<div class="viewcode-block" id="Polynome.reductible"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.reductible">[docs]</a>    <span class="k">def</span> <span class="nf">reductible</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;**reductible**\ (*object*)</span>

<span class="sd">        Retourne True si le polynôme est réductible ou ordonnable, False sinon.</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">            &gt;&gt;&gt; Polynome([[2, 1], [3, 2], [4, 0], [-1, 1], [6, 0]], &quot;y&quot;).reductible()</span>
<span class="sd">            True</span>

<span class="sd">        :param type: Polynome</span>
<span class="sd">        :rtype: boolean</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c">#=======================================================================</span>
        <span class="c"># if self != self.reduit():</span>
        <span class="c">#     return True</span>
        <span class="c"># else:</span>
        <span class="c">#     return False</span>
        <span class="c">#=======================================================================</span>
        <span class="n">ldegres</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">ldegres</span><span class="p">:</span> <span class="k">return</span> <span class="bp">True</span>
            <span class="c"># Il existe déjà un monome de même degré, le polynome est donc réductible.</span>
            <span class="k">elif</span> <span class="n">ldegres</span> <span class="ow">and</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">ldegres</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span> <span class="k">return</span> <span class="bp">True</span>
            <span class="c"># Polynome non ordonné</span>
            <span class="k">else</span><span class="p">:</span> <span class="n">ldegres</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">Priorites3</span><span class="o">.</span><span class="n">priorites</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span> <span class="k">return</span> <span class="bp">True</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Fraction</span><span class="p">)</span> <span class="ow">and</span> <span class="n">Priorites3</span><span class="o">.</span><span class="n">priorites</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">])):</span> <span class="k">return</span> <span class="bp">True</span>
            <span class="c"># une simplification de fraction ou un calcul est à faire</span>
        <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Polynome.ordonnable"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.ordonnable">[docs]</a>    <span class="k">def</span> <span class="nf">ordonnable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;**ordonnable**\ (*object*)</span>

<span class="sd">        Retourne True si le polynome n&#39;est pas ordonnée, False sinon.</span>

<span class="sd">        :param type: Polynome</span>
<span class="sd">        :rtype: boolean</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lastdegre</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">lastdegre</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">lastdegre</span><span class="p">:</span> <span class="k">return</span> <span class="bp">True</span>
            <span class="k">else</span><span class="p">:</span> <span class="n">lastdegre</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Polynome.ordonne"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.ordonne">[docs]</a>    <span class="k">def</span> <span class="nf">ordonne</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;**ordonne**\ (*object*)</span>

<span class="sd">        Retourne une version ordonnée d&#39;un polynome en écrivant en premier les</span>
<span class="sd">        monômes de degré supérieur.</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">            &gt;&gt;&gt; Polynome([[2, 1], [3, 2], [4, 0], [-1, 1], [6, 0]], &quot;y&quot;).ordonne()</span>
<span class="sd">            Polynome([[3, 2], [2, 1], [-1, 1], [4, 0], [6, 0]], &quot;y&quot;, 0)</span>

<span class="sd">        :param type: Polynome</span>
<span class="sd">        :rtype: Polynome</span>
<span class="sd">        &quot;&quot;&quot;</span>
<span class="c">#         if len(self) == 1: return self</span>
        <span class="n">m1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">monomes</span>
        <span class="n">m1</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">m1</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">Polynome</span><span class="p">(</span><span class="n">m1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Polynome.nreduction"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.Polynome.nreduction">[docs]</a>    <span class="k">def</span> <span class="nf">nreduction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bdirecte</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;**nreduction**\ (*object*)</span>

<span class="sd">        Retourne une étape de la réduction d&#39;un polynome selon la valeur de *detail*</span>
<span class="sd">        Si bdirecte est True, alors donne la version réduite sans aucun détail de calcul</span>

<span class="sd">        :param type: Polynome</span>
<span class="sd">        :param bdirecte: faut-il donner directement le résultat de la réduction, sans étape de calcul ?</span>
<span class="sd">        :param type: boolean</span>
<span class="sd">        :rtype: Polynome</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">_reduit_monome</span><span class="p">(</span><span class="n">monome</span><span class="p">,</span> <span class="n">bdirecte</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">monome</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">monome</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Fraction</span><span class="p">):</span>
            <span class="c"># une réduction peut-être à faire ici</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">monome</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Fraction</span><span class="p">):</span>
                    <span class="n">monome</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">monome</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">res</span> <span class="o">=</span> <span class="n">Priorites3</span><span class="o">.</span><span class="n">priorites</span><span class="p">(</span><span class="n">monome</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">res</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c"># Le calcul s&#39;effectue en une seule étape</span>
                    <span class="n">monome</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">elif</span> <span class="n">res</span><span class="p">:</span>
                <span class="c"># Il y a un calcul à effectuer en plusieurs étapes</span>
                    <span class="k">if</span> <span class="n">bdirecte</span><span class="p">:</span>  <span class="c"># on ne détaille pas</span>
                        <span class="n">monome</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">bdec</span> <span class="o">=</span> <span class="bp">True</span>
                        <span class="c"># *bdec* est un booléen qui est True si le calcul ne contient que des décimaux</span>
                        <span class="k">for</span> <span class="n">nb</span> <span class="ow">in</span> <span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                            <span class="k">if</span> <span class="n">nb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s">&quot;+-*/0123456789(&quot;</span><span class="p">:</span>
                                <span class="n">bdec</span> <span class="o">=</span> <span class="bp">False</span>

                        <span class="k">if</span> <span class="n">bdec</span><span class="p">:</span>  <span class="c"># on calcule en une étape 3+4-5</span>
                            <span class="n">monome</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">monome</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>  <span class="c"># on calcule étape par étape</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">monome</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">monome</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>  <span class="c"># le texte n&#39;était pas nécessaire, c&#39;est un nombre ou la fraction était irréductible</span>
            <span class="k">return</span> <span class="n">monome</span>


        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">reductible</span><span class="p">:</span> <span class="k">return</span> <span class="bp">self</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ordonnable</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">bdirecte</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ordonne</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ordonne</span><span class="p">()</span><span class="o">.</span><span class="n">reductible</span><span class="p">():</span>
                <span class="c"># le polynome est seulement ordonnable</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ordonne</span><span class="p">()</span>
            <span class="c"># le polynome est donc réductible :</span>
            <span class="n">factorisation</span><span class="p">,</span> <span class="n">bfact</span> <span class="o">=</span> <span class="p">[],</span> <span class="bp">False</span>
            <span class="c"># *factorisation* est une liste de monomes, qui va contenir les monomes du polynome en cours</span>
            <span class="c"># de réduction, en stockant au format texte la somme des coefficients des monomes de même degré</span>
            <span class="c"># *bfact* est un booléen qui est vrai si on doit effectuer une factorisation pour réduire le</span>
            <span class="c"># polynome</span>
            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ordonne</span><span class="p">()</span><span class="o">.</span><span class="n">monomes</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">factorisation</span> <span class="ow">and</span>  <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">factorisation</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="c"># deux monomes de même degré</span>
                    <span class="n">bfact</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">factorisation</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span> <span class="n">factorisation</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">factorisation</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
                        <span class="c"># On écrit la somme des deux coefficients au format str</span>
                        <span class="n">factorisation</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="s">&#39;+&#39;</span> <span class="o">+</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">factorisation</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="s">&#39;+</span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="c"># On écrit la somme des deux coefficients au format str</span>
                    <span class="k">elif</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Fraction</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">d</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                            <span class="c"># On écrit la somme des deux coefficients au format str</span>
                            <span class="n">factorisation</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="s">&#39;+</span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="c"># On écrit la différence des deux coefficients au format str, &#39;2-4&#39;</span>
                            <span class="c"># plutôt que &#39;2+(-4)&#39;</span>
                            <span class="n">factorisation</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="s">&#39;-</span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="o">-</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c"># on ajoute un nouveau monome de degré inférieur au précédent</span>
                    <span class="n">factorisation</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
            <span class="k">if</span> <span class="n">bfact</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">bdirecte</span><span class="p">:</span>
                    <span class="c"># On retorune le polynome avec les factorisations mises en évidence</span>
                    <span class="c"># Cas du monome de degré 0</span>
                    <span class="k">if</span> <span class="n">factorisation</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">factorisation</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
                        <span class="n">factorisation</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">_reduit_monome</span><span class="p">(</span><span class="n">factorisation</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">bdirecte</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">Polynome</span><span class="p">(</span><span class="n">factorisation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="n">details</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">)</span>
            <span class="c"># on réduit le polynome</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">factorisation</span><span class="p">)):</span>
                <span class="n">factorisation</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">_reduit_monome</span><span class="p">(</span><span class="n">factorisation</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">bdirecte</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Polynome</span><span class="p">(</span><span class="n">factorisation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="n">details</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">)</span>
            <span class="c"># Les monomes nuls sont retirés par la classe Polynome</span>
</div>
    <span class="k">def</span> <span class="nf">_convert_other</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Convertit other en Polynome</span>

<span class="sd">        Utilisée dans les fonctions d&#39;opérations entre Polynomes :add, sub, mul, ...</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Polynome</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">var</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">other</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">u&#39;Pyromaths ne sait manipuler que deux polynômes de même variable : </span><span class="si">%s</span><span class="s"> et </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">var</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">Fraction</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">Polynome</span><span class="p">([[</span><span class="n">other</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>
</div>
<div class="viewcode-block" id="factoriser"><a class="viewcode-back" href="../../../pyromaths.classes.PolynomesCollege.html#pyromaths.classes.PolynomesCollege.factoriser">[docs]</a><span class="k">def</span> <span class="nf">factoriser</span><span class="p">(</span><span class="n">calcul</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Factorise la somme calcul. Cette procédure n&#39;est ni exaustive, ni</span>
<span class="sd">    robuste. Elle permet actuellement de résoudre les exercices proposés en 3e.</span>

<span class="sd">    :param calcul: Expression à factoriser</span>
<span class="sd">    :type calcul: str</span>

<span class="sd">    &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import factoriser</span>
<span class="sd">    &gt;&gt;&gt; factoriser(&quot;Polynome(&#39;4x^2+12x+9&#39;)&quot;)</span>
<span class="sd">    &#39;Polynome([[2.0, 1]], &quot;x&quot;, 0)**2+2*Polynome([[2.0, 1]], &quot;x&quot;, 0)*Polynome([[3.0, 0]], &quot;x&quot;, 0)+Polynome([[3.0, 0]], &quot;x&quot;, 0)**2&#39;</span>
<span class="sd">    &gt;&gt;&gt; factoriser(&quot;Polynome(&#39;-4x^2+12x-9&#39;)&quot;)</span>
<span class="sd">    &#39;-(Polynome([[2.0, 1]], &quot;x&quot;, 0)**2-2*Polynome([[2.0, 1]], &quot;x&quot;, 0)*Polynome([[3.0, 0]], &quot;x&quot;, 0)+Polynome([[3.0, 0]], &quot;x&quot;, 0)**2)&#39;</span>
<span class="sd">    &gt;&gt;&gt; factoriser(&quot;Polynome(&#39;4x^2-9&#39;)&quot;)</span>
<span class="sd">    &#39;Polynome([[2.0, 1]], &quot;x&quot;, 0)**2-Polynome([[3.0, 0]], &quot;x&quot;, 0)**2&#39;</span>
<span class="sd">    &gt;&gt;&gt; factoriser(&quot;Polynome(&#39;4x^2&#39;)&quot;)</span>
<span class="sd">    &#39;Polynome([[2.0, 1]], &quot;x&quot;, 0)**2&#39;</span>
<span class="sd">    &gt;&gt;&gt; factoriser(&quot;Polynome(&#39;4x&#39;)&quot;)</span>
<span class="sd">    &gt;&gt;&gt; factoriser(&quot;Polynome(&#39;x+1&#39;)*Polynome(&#39;x+2&#39;)+Polynome(&#39;x+1&#39;)*Polynome(&#39;x+3&#39;)&quot;)</span>
<span class="sd">    &#39;Polynome([[1, 1], [1, 0]], &quot;x&quot;, 0)*(Polynome([[1, 1], [2, 0]], &quot;x&quot;, 0)+Polynome([[1, 1], [3, 0]], &quot;x&quot;, 0))&#39;</span>
<span class="sd">    &gt;&gt;&gt; factoriser(&quot;Polynome(&#39;x+1&#39;)*Polynome(&#39;x+2&#39;)+Polynome(&#39;x+1&#39;)&quot;)</span>
<span class="sd">    &#39;Polynome([[1, 1], [1, 0]], &quot;x&quot;, 0)*Polynome([[1, 1], [2, 0]], &quot;x&quot;, 0)+Polynome([[1, 1], [1, 0]], &quot;x&quot;, 0)*1&#39;</span>
<span class="sd">    &gt;&gt;&gt; factoriser(&quot;Polynome(&#39;x+1&#39;)*Polynome(&#39;x+2&#39;)+Polynome(&#39;x+1&#39;)**2&quot;)</span>
<span class="sd">    &#39;Polynome([[1, 1], [1, 0]], &quot;x&quot;, 0)*Polynome([[1, 1], [2, 0]], &quot;x&quot;, 0)+Polynome([[1, 1], [1, 0]], &quot;x&quot;, 0)*Polynome([[1, 1], [1, 0]], &quot;x&quot;, 0)&#39;</span>
<span class="sd">    &gt;&gt;&gt; factoriser(&quot;Polynome(&#39;x+1&#39;)**2-Polynome([[81, 0]], &#39;x&#39;, 3)&quot;)</span>
<span class="sd">    &#39;Polynome([[1, 1], [1, 0]], &quot;x&quot;, 0)**2-Polynome([[9.0, 0]], &quot;x&quot;, 3)**2&#39;</span>

<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">id_rem</span><span class="p">(</span><span class="n">poly</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Vérifie si poly correspond au développement d&#39;une identité</span>
<span class="sd">        remarquable ou est un carré.</span>

<span class="sd">        :param poly: polynome à évaluer</span>
<span class="sd">        :type poly: Polynome</span>

<span class="sd">        &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege import Polynome</span>
<span class="sd">        &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege.factoriser import id_rem</span>
<span class="sd">        &gt;&gt;&gt; id_rem(Polynome(&#39;4x^2+12x+9&#39;))</span>
<span class="sd">        &quot;Polynome(&#39;2x&#39;)+2*Polynome(&#39;2x&#39;)*Polynome(&#39;3&#39;)+Polynome(&#39;3&#39;)**2&quot;</span>
<span class="sd">        &gt;&gt;&gt; id_rem(Polynome(&#39;-4x^2+12x-9&#39;))</span>
<span class="sd">        &quot;-(Polynome(&#39;2x&#39;)-2*Polynome(&#39;2x&#39;)*Polynome(&#39;3&#39;)+Polynome(&#39;3&#39;)**2)&quot;</span>
<span class="sd">        &gt;&gt;&gt; id_rem(Polynome(&#39;4x^2-9&#39;))</span>
<span class="sd">        &quot;(Polynome(&#39;2x&#39;)+Polynome(&#39;3&#39;))*(Polynome(&#39;2x&#39;)-Polynome(&#39;3&#39;))&quot;</span>
<span class="sd">        &gt;&gt;&gt; id_rem(Polynome(&#39;4x^2&#39;))</span>
<span class="sd">        &quot;Polynome(&#39;2x&#39;)**2&quot;</span>
<span class="sd">        &gt;&gt;&gt; id_rem(Polynome(&#39;4x&#39;))</span>
<span class="sd">        None</span>

<span class="sd">        :rtype: str ou None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>
        <span class="n">poly</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">ordonne</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> \
              <span class="n">Arithmetique</span><span class="o">.</span><span class="n">carrerise</span><span class="p">(</span><span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="s">&quot;</span><span class="si">%r</span><span class="s">**2&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Polynome</span><span class="p">([[</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])),</span> <span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">]],</span> <span class="n">poly</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="n">poly</span><span class="o">.</span><span class="n">details</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">a</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">Polynome</span><span class="p">([[</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])),</span> <span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">]],</span> <span class="n">poly</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="n">poly</span><span class="o">.</span><span class="n">details</span><span class="p">))</span>
            <span class="n">b</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">Polynome</span><span class="p">([[</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">poly</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])),</span> <span class="n">poly</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">]],</span> <span class="n">poly</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="n">poly</span><span class="o">.</span><span class="n">details</span><span class="p">))</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">%</span> <span class="mi">2</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">poly</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">%</span> <span class="mi">2</span><span class="p">:</span>
                <span class="c"># Les deux exposants sont des carrés</span>
                <span class="k">if</span> <span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">poly</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c"># 3ème identité remarquable</span>
                    <span class="k">if</span> <span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">**2-</span><span class="si">%s</span><span class="s">**2&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">**2-</span><span class="si">%s</span><span class="s">**2&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">a</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">Polynome</span><span class="p">([[</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])),</span> <span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">]],</span> <span class="n">poly</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="n">poly</span><span class="o">.</span><span class="n">details</span><span class="p">))</span>
            <span class="n">b</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">Polynome</span><span class="p">([[</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">poly</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">])),</span> <span class="n">poly</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">]],</span> <span class="n">poly</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="n">poly</span><span class="o">.</span><span class="n">details</span><span class="p">))</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">%</span> <span class="mi">2</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">poly</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">%</span> <span class="mi">2</span> <span class="ow">and</span> <span class="p">(</span><span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">poly</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">==</span> <span class="n">poly</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]):</span>
                <span class="c"># Ça ressemble à l&#39;une des deux premières indentités remarquables</span>
                <span class="k">if</span> <span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">poly</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">poly</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> \
                      <span class="mi">4</span> <span class="o">*</span> <span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">poly</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">poly</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="c"># 1ère identité remarquable, au signe près</span>
                    <span class="k">if</span> <span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="s">&#39;**2+2*&#39;</span> <span class="o">+</span> <span class="n">a</span> <span class="o">+</span> <span class="s">&#39;*&#39;</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="s">&#39;+&#39;</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="s">&#39;**2&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">return</span> <span class="s">&#39;-(&#39;</span> <span class="o">+</span> <span class="n">a</span> <span class="o">+</span> <span class="s">&#39;**2+2*&#39;</span> <span class="o">+</span> <span class="n">a</span> <span class="o">+</span> <span class="s">&#39;*&#39;</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="s">&#39;+&#39;</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="s">&#39;**2)&#39;</span>
                <span class="k">if</span> <span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">poly</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">poly</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">and</span> \
                      <span class="mi">4</span> <span class="o">*</span> <span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">poly</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">poly</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="s">&#39;**2-2*&#39;</span> <span class="o">+</span> <span class="n">a</span> <span class="o">+</span> <span class="s">&#39;*&#39;</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="s">&#39;+&#39;</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="s">&#39;**2&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">return</span> <span class="s">&#39;-(&#39;</span> <span class="o">+</span> <span class="n">a</span> <span class="o">+</span> <span class="s">&#39;**2-2*&#39;</span> <span class="o">+</span> <span class="n">a</span> <span class="o">+</span> <span class="s">&#39;*&#39;</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="s">&#39;+&#39;</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="s">&#39;**2)&#39;</span>
        <span class="k">return</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">EstFactorise</span><span class="p">(</span><span class="n">lcalcul</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;indique si une liste de calculs est factorisée</span>

<span class="sd">        :param lcalcul: liste de calculs</span>
<span class="sd">        :type lcalcul: list</span>

<span class="sd">        &gt;&gt;&gt; from pyromaths.classes.PolynomesCollege.factoriser import EstFactorise</span>
<span class="sd">        &gt;&gt;&gt; EstFactorise([&quot;Polynome(&#39;3x+4&#39;)&quot;, &quot;*&quot;, &quot;5&quot;])</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; EstFactorise([&quot;Polynome(&#39;3x+4&#39;)&quot;, &quot;*&quot;, &quot;5&quot;, &quot;+&quot;, &quot;Polynome(&#39;2x+7&#39;)&quot;])</span>
<span class="sd">        False</span>

<span class="sd">        :rtype: boolean</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Si le premier symbole est &#39;+&#39; ou &#39;-&#39;, alors cela n&#39;influe pas sur somme / produit</span>
        <span class="n">dummy</span> <span class="o">=</span> <span class="p">[</span><span class="n">lcalcul</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lcalcul</span><span class="p">))]</span>
        <span class="k">if</span> <span class="n">dummy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;+&#39;</span> <span class="ow">or</span> <span class="n">dummy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;-&#39;</span><span class="p">:</span> <span class="n">dummy</span> <span class="o">=</span> <span class="n">dummy</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">par</span> <span class="o">=</span> <span class="n">Priorites3</span><span class="o">.</span><span class="n">recherche_parentheses</span><span class="p">(</span><span class="n">dummy</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">par</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">par</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">par</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">dummy</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">EstFactorise</span><span class="p">(</span><span class="n">dummy</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">while</span> <span class="n">par</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">dummy</span><span class="p">[</span><span class="n">par</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span><span class="n">par</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
                <span class="n">par</span> <span class="o">=</span> <span class="n">Priorites3</span><span class="o">.</span><span class="n">recherche_parentheses</span><span class="p">(</span><span class="n">dummy</span><span class="p">)</span>

            <span class="k">if</span> <span class="s">&#39;+&#39;</span> <span class="ow">in</span> <span class="n">dummy</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="ow">or</span> <span class="s">&#39;-&#39;</span> <span class="ow">in</span> <span class="n">dummy</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
                <span class="k">return</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="s">&#39;+&#39;</span> <span class="ow">in</span> <span class="n">dummy</span> <span class="ow">or</span> <span class="s">&#39;-&#39;</span> <span class="ow">in</span> <span class="n">dummy</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="bp">True</span>

    <span class="kn">from</span> <span class="nn">pyromaths.outils</span> <span class="kn">import</span> <span class="n">Arithmetique</span>

    <span class="n">lcalcul</span> <span class="o">=</span> <span class="n">Priorites3</span><span class="o">.</span><span class="n">splitting</span><span class="p">(</span><span class="n">calcul</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lcalcul</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="c"># On tente une identité remarquable, un facteur commun ou une méthode Lycée (à faire plus tard)</span>
        <span class="k">if</span> <span class="s">&#39;Polynome(&#39;</span> <span class="o">==</span> <span class="n">lcalcul</span><span class="p">[</span><span class="mi">0</span><span class="p">][:</span><span class="mi">9</span><span class="p">]:</span>
            <span class="n">poly</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">lcalcul</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">id_rem</span> <span class="o">=</span> <span class="n">id_rem</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">id_rem</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c"># Cherchons un facteur commun</span>
                <span class="n">facteur</span> <span class="o">=</span> <span class="n">Arithmetique</span><span class="o">.</span><span class="n">pgcd</span><span class="p">([</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">poly</span><span class="p">])</span>
                <span class="n">exp</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">poly</span><span class="p">])</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">facteur</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">exp</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">k</span> <span class="o">=</span> <span class="n">Polynome</span><span class="p">([[</span><span class="n">facteur</span><span class="p">,</span> <span class="n">exp</span><span class="p">]],</span> <span class="n">poly</span><span class="o">.</span><span class="n">var</span><span class="p">,</span> <span class="n">poly</span><span class="o">.</span><span class="n">details</span><span class="p">)</span>
                    <span class="n">a</span> <span class="o">=</span> <span class="n">poly</span> <span class="o">//</span> <span class="n">k</span>
                    <span class="k">return</span> <span class="s">&quot;*&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">repr</span><span class="p">(</span><span class="n">k</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">a</span><span class="p">)])</span>
                <span class="k">return</span> <span class="bp">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">id_rem</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">u&#39;</span><span class="si">%s</span><span class="s"> n</span><span class="se">\&#39;</span><span class="s">est pas un Polynome et ne peut être factorisé&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c"># C&#39;est soit une somme de polynomes qu&#39;il faut factoriser, soit déjà un produit</span>
        <span class="k">if</span> <span class="n">EstFactorise</span><span class="p">(</span><span class="n">lcalcul</span><span class="p">):</span>
            <span class="c"># Il faut réduire les sommes</span>
            <span class="n">poly</span> <span class="o">=</span> <span class="n">Priorites3</span><span class="o">.</span><span class="n">priorites</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lcalcul</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">EstFactorise</span><span class="p">(</span><span class="n">poly</span><span class="p">):</span> <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="bp">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># On cherche un facteur commun ou une identité remarquable</span>
            <span class="n">nbpar</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">ltermes</span> <span class="o">=</span> <span class="p">[[]]</span>
            <span class="k">if</span> <span class="n">lcalcul</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="s">&#39;+-&#39;</span><span class="p">:</span>
                <span class="n">lsgn</span> <span class="o">=</span> <span class="p">[</span><span class="n">lcalcul</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">lsgn</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">lcalcul</span><span class="p">[</span><span class="mi">0</span><span class="p">][:</span><span class="mi">9</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;Polynome(&#39;</span><span class="p">:</span> <span class="n">ltermes</span> <span class="o">=</span> <span class="p">[[</span><span class="nb">repr</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">lcalcul</span><span class="p">[</span><span class="mi">0</span><span class="p">]))]]</span>
                <span class="k">else</span><span class="p">:</span> <span class="n">ltermes</span> <span class="o">=</span> <span class="p">[[</span><span class="n">lcalcul</span><span class="p">[</span><span class="mi">0</span><span class="p">]]]</span>
            <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">lcalcul</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
                <span class="k">if</span> <span class="n">el</span> <span class="ow">in</span> <span class="s">&#39;+-&#39;</span> <span class="ow">and</span> <span class="n">nbpar</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">lsgn</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
                    <span class="n">ltermes</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">el</span> <span class="o">==</span> <span class="s">&#39;(&#39;</span><span class="p">:</span> <span class="n">nbpar</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">elif</span> <span class="n">el</span> <span class="o">==</span> <span class="s">&#39;)&#39;</span><span class="p">:</span> <span class="n">nbpar</span> <span class="o">+=</span> <span class="o">-</span><span class="mi">1</span>
                    <span class="k">if</span> <span class="n">el</span><span class="p">[:</span><span class="mi">9</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;Polynome(&#39;</span><span class="p">:</span> <span class="n">ltermes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">el</span><span class="p">)))</span>
                    <span class="k">else</span><span class="p">:</span> <span class="n">ltermes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ltermes</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span> <span class="ow">and</span> <span class="n">lcalcul</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;**&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">lcalcul</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;*&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">lcalcul</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;2&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="c"># On peut être en présence de l&#39;une des 2 premières identités remarquables</span>
                <span class="n">exp1</span> <span class="o">=</span> <span class="n">lcalcul</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&#39;**&#39;</span><span class="p">)</span>
                <span class="n">a</span> <span class="o">=</span> <span class="n">lcalcul</span><span class="p">[</span><span class="n">exp1</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">indexa</span> <span class="o">=</span> <span class="n">ltermes</span><span class="o">.</span><span class="n">index</span><span class="p">([</span><span class="n">a</span><span class="p">,</span> <span class="s">&#39;**&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">])</span>
                <span class="n">sgna</span> <span class="o">=</span> <span class="n">lsgn</span><span class="p">[</span><span class="n">indexa</span><span class="p">]</span> <span class="ow">or</span> <span class="s">&#39;+&#39;</span>
                <span class="n">exp2</span> <span class="o">=</span> <span class="n">lcalcul</span><span class="p">[</span><span class="n">exp1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&#39;**&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">exp1</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">b</span> <span class="o">=</span> <span class="n">lcalcul</span><span class="p">[</span><span class="n">exp2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">indexb</span> <span class="o">=</span> <span class="n">ltermes</span><span class="o">.</span><span class="n">index</span><span class="p">([</span><span class="n">b</span><span class="p">,</span> <span class="s">&#39;**&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">])</span>
                <span class="n">sgnb</span> <span class="o">=</span> <span class="n">lsgn</span><span class="p">[</span><span class="n">indexb</span><span class="p">]</span> <span class="ow">or</span> <span class="s">&#39;+&#39;</span>

                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ltermes</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ltermes</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">==</span> <span class="mi">5</span> <span class="ow">and</span> <span class="n">ltermes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;2&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> \
                      <span class="n">ltermes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;*&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">ltermes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="ow">and</span> \
                      <span class="n">ltermes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
                        <span class="n">indexp</span> <span class="o">=</span> <span class="n">i</span>
                        <span class="n">sgnp</span> <span class="o">=</span> <span class="n">lsgn</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">or</span> <span class="s">&#39;+&#39;</span>

                <span class="k">if</span> <span class="n">sgna</span> <span class="o">==</span> <span class="n">sgnb</span> <span class="ow">and</span> <span class="n">sgna</span> <span class="o">!=</span> <span class="n">sgnp</span><span class="p">:</span>
                    <span class="n">poly</span> <span class="o">=</span> <span class="s">&#39;(</span><span class="si">%s</span><span class="s">-</span><span class="si">%s</span><span class="s">)**2&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">sgna</span> <span class="o">==</span> <span class="n">sgnb</span> <span class="ow">and</span> <span class="n">sgna</span> <span class="o">==</span> <span class="n">sgnp</span><span class="p">:</span>
                    <span class="n">poly</span> <span class="o">=</span> <span class="s">&#39;(</span><span class="si">%s</span><span class="s">+</span><span class="si">%s</span><span class="s">)**2&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c"># Pas d&#39;identité remarquable</span>
                    <span class="n">poly</span> <span class="o">=</span> <span class="bp">None</span>
                <span class="k">if</span> <span class="n">poly</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">sgna</span> <span class="o">==</span> <span class="s">&#39;-&#39;</span><span class="p">:</span> <span class="n">poly</span> <span class="o">=</span> <span class="s">&#39;-</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">poly</span>
                    <span class="n">lindex</span> <span class="o">=</span> <span class="p">[</span><span class="n">indexa</span><span class="p">,</span> <span class="n">indexb</span><span class="p">,</span> <span class="n">indexp</span><span class="p">]</span>
                    <span class="n">lindex</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
                    <span class="n">lindex</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">lindex</span><span class="p">:</span>
                        <span class="n">lsgn</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                        <span class="n">ltermes</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

                    <span class="n">ltermes</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ltermes</span><span class="p">),</span> <span class="n">indexa</span><span class="p">,</span> <span class="n">indexb</span><span class="p">,</span> <span class="n">indexp</span><span class="p">),</span> <span class="n">Priorites3</span><span class="o">.</span><span class="n">splitting</span><span class="p">(</span><span class="n">poly</span><span class="p">))</span>
                    <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ltermes</span><span class="p">)):</span>
                        <span class="c"># TODO: IndexError: list index out of range</span>

                        <span class="k">if</span> <span class="n">lsgn</span> <span class="ow">and</span> <span class="n">lsgn</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span> <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lsgn</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                        <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">ltermes</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                    <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

            <span class="k">if</span> <span class="p">((</span><span class="s">&#39;+&#39;</span> <span class="ow">in</span> <span class="n">lsgn</span> <span class="ow">or</span> <span class="s">&#39;&#39;</span> <span class="ow">in</span> <span class="n">lsgn</span><span class="p">)</span> <span class="ow">and</span> <span class="s">&#39;-&#39;</span> <span class="ow">in</span> <span class="n">lsgn</span><span class="p">)</span> <span class="ow">and</span> <span class="n">calcul</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&quot;**&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">lcalcul</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&quot;2&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">ltermes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="c"># 3ème identité remarquable</span>
                <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">ltermes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">eval</span><span class="p">(</span><span class="n">ltermes</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">lsgn</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;-&#39;</span><span class="p">:</span> <span class="k">return</span> <span class="s">&#39;(</span><span class="si">%r</span><span class="s">+</span><span class="si">%r</span><span class="s">)*(</span><span class="si">%r</span><span class="s">-</span><span class="si">%r</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="s">&#39;(</span><span class="si">%r</span><span class="s">+</span><span class="si">%r</span><span class="s">)*(</span><span class="si">%r</span><span class="s">-</span><span class="si">%r</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">ltermes</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">k</span><span class="p">[:</span><span class="mi">9</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;Polynome(&#39;</span><span class="p">:</span>
                    <span class="n">commun</span> <span class="o">=</span> <span class="bp">False</span>
                    <span class="n">bdetail</span> <span class="o">=</span> <span class="bp">False</span>
                    <span class="n">pos</span> <span class="o">=</span> <span class="n">ltermes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ltermes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="n">bdetail</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="k">elif</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">ltermes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">ltermes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;**&quot;</span><span class="p">:</span> <span class="n">bdetail</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ltermes</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">ltermes</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
                            <span class="n">commun</span> <span class="o">=</span> <span class="bp">True</span>
                            <span class="n">pos</span> <span class="o">=</span> <span class="n">ltermes</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ltermes</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="n">bdetail</span> <span class="o">=</span> <span class="bp">True</span>
                            <span class="k">elif</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">ltermes</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">ltermes</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;**&quot;</span><span class="p">:</span> <span class="n">bdetail</span> <span class="o">=</span> <span class="bp">True</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">commun</span> <span class="o">=</span> <span class="bp">False</span>
                            <span class="k">break</span>
                <span class="k">if</span> <span class="n">commun</span><span class="p">:</span> <span class="k">break</span>
            <span class="k">if</span> <span class="n">commun</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ltermes</span><span class="p">)):</span>
                    <span class="n">pos</span> <span class="o">=</span> <span class="n">ltermes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ltermes</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">ltermes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s">&quot;*&quot;</span><span class="p">,</span> <span class="s">&quot;1&quot;</span><span class="p">])</span>
                    <span class="k">elif</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">ltermes</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">ltermes</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;**&quot;</span> <span class="ow">and</span> <span class="n">ltermes</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">pos</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;2&quot;</span><span class="p">:</span>
                        <span class="n">ltermes</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span><span class="n">pos</span> <span class="o">+</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;*&quot;</span><span class="p">,</span> <span class="n">ltermes</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">pos</span><span class="p">]]</span>
                    <span class="k">elif</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">ltermes</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">ltermes</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;**&quot;</span><span class="p">:</span>
                        <span class="n">ltermes</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">pos</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">ltermes</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">pos</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="ow">not</span> <span class="n">bdetail</span><span class="p">:</span>
                        <span class="k">del</span> <span class="n">ltermes</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">pos</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">pos</span><span class="p">:</span> <span class="k">del</span> <span class="n">ltermes</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">pos</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
                        <span class="c"># supprime le symbole *</span>
                        <span class="k">else</span><span class="p">:</span> <span class="k">del</span> <span class="n">ltermes</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">pos</span><span class="p">]</span>
                <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ltermes</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">lsgn</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lsgn</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                    <span class="n">a</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">ltermes</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">bdetail</span><span class="p">:</span>
                    <span class="c"># On affiche le facteur commun de façon claire</span>
                    <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c"># On effectuer la factorisation par le facteur commun</span>
                    <span class="k">return</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">*(</span><span class="si">%s</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">bfact</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lcalcul</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="s">&#39;Polynome(&#39;</span> <span class="o">==</span> <span class="n">lcalcul</span><span class="p">[</span><span class="n">i</span><span class="p">][:</span><span class="mi">9</span><span class="p">]:</span>
                        <span class="n">poly</span> <span class="o">=</span> <span class="n">id_rem</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">lcalcul</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
                        <span class="k">if</span> <span class="n">poly</span><span class="p">:</span>
                            <span class="n">bfact</span> <span class="o">=</span> <span class="bp">True</span>
                            <span class="n">lcalcul</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">Priorites3</span><span class="o">.</span><span class="n">splitting</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">lcalcul</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">lcalcul</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
                <span class="k">if</span> <span class="n">bfact</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lcalcul</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="bp">None</span></div>
</pre></div>

      </div>
      <div class="bottomnav">
      
        <p>
        <a class="uplink" href="../../../index.html">Contenu</a>
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2013-2014, Jérôme Ortais.
      Créé avec <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>