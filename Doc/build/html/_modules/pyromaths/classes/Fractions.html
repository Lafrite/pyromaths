<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pyromaths.classes.Fractions &mdash; documentation Pyromaths 13.03</title>
    
    <link rel="stylesheet" href="../../../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '13.03',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/translations.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="documentation Pyromaths 13.03" href="../../../index.html" />
    <link rel="up" title="Code du module" href="../../index.html" /> 
  </head>
  <body>
      <div class="header"><img class="rightlogo" src="../../../_static/bandeau.png" alt="Logo"/><h1 class="heading"><a href="../../../index.html">
          <span>documentation Pyromaths 13.03</span></a></h1>
        <h2 class="heading"><span>pyromaths.classes.Fractions</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        <a class="uplink" href="../../../index.html">Contenu</a>
        </p>

      </div>
      <div class="content">
        
        
  <h1>Code source de pyromaths.classes.Fractions</h1><div class="highlight"><pre>
<span class="c">#!/usr/bin/python</span>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="c">#</span>
<span class="c"># Pyromaths</span>
<span class="c"># Un programme en Python qui permet de créer des fiches d&#39;exercices types de</span>
<span class="c"># mathématiques niveau collège ainsi que leur corrigé en LaTeX.</span>
<span class="c"># Copyright (C) 2006 -- Jérôme Ortais (jerome.ortais@pyromaths.org)</span>
<span class="c">#</span>
<span class="c"># This program is free software; you can redistribute it and/or modify</span>
<span class="c"># it under the terms of the GNU General Public License as published by</span>
<span class="c"># the Free Software Foundation; either version 2 of the License, or</span>
<span class="c"># (at your option) any later version.</span>
<span class="c">#</span>
<span class="c"># This program is distributed in the hope that it will be useful,</span>
<span class="c"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="c"># GNU General Public License for more details.</span>
<span class="c">#</span>
<span class="c"># You should have received a copy of the GNU General Public License</span>
<span class="c"># along with this program; if not, write to the Free Software</span>
<span class="c"># Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA</span>
<span class="c">#</span>

<span class="kn">from</span> <span class="nn">pyromaths.outils.Arithmetique</span> <span class="kn">import</span> <span class="n">pgcd</span><span class="p">,</span> <span class="n">ppcm</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>

<div class="viewcode-block" id="Fraction"><a class="viewcode-back" href="../../../pyromaths.classes.Fractions.html#pyromaths.classes.Fractions.Fraction">[docs]</a><span class="k">class</span> <span class="nc">Fraction</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Cette classe crée la notion de fractions.</span>
<span class="sd">    code permet de préciser si une décomposition a pour objectif une mise au</span>
<span class="sd">    même dénominateur &#39;r&#39; ou une simplification &#39;s&#39;</span>

<span class="sd">    &gt;&gt;&gt; from pyromaths.classes.Fractions import Fraction</span>
<span class="sd">    &gt;&gt;&gt; Fraction(5,6)</span>
<span class="sd">    Fraction(5, 6)</span>
<span class="sd">    &gt;&gt;&gt; Fraction(&#39;x&#39;,6)</span>
<span class="sd">    Fraction(&quot;x&quot;, 6)</span>
<span class="sd">    &gt;&gt;&gt; Fraction(3.4)</span>
<span class="sd">    Fraction(34, 10)</span>
<span class="sd">    &gt;&gt;&gt; Fraction(3.0, 4.0)</span>
<span class="sd">    Fraction(3, 4)</span>
<span class="sd">    &gt;&gt;&gt; Fraction(Fraction(1,3))</span>
<span class="sd">    Fraction(1, 3)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pyromaths.classes.PolynomesCollege</span> <span class="kn">import</span> <span class="n">Polynome</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">float</span><span class="p">(</span><span class="s">&quot;inf&quot;</span><span class="p">):</span>
            <span class="n">e</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s">&#39;0&#39;</span><span class="p">))</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">**</span> <span class="n">e</span><span class="p">)</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">d</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">**</span> <span class="n">e</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
            <span class="n">e</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s">&#39;0&#39;</span><span class="p">))</span>
            <span class="n">d</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">d</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">**</span> <span class="n">e</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">**</span> <span class="n">e</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="n">d</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">code</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">Fraction</span><span class="p">)</span> <span class="ow">and</span> <span class="n">d</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">code</span> <span class="o">==</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="c"># Fraction(Fraction(1, 3)) renvoie Fraction(1, 3)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">n</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">d</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">code</span>


<div class="viewcode-block" id="Fraction.__str__"><a class="viewcode-back" href="../../../pyromaths.classes.Fractions.html#pyromaths.classes.Fractions.Fraction.__str__">[docs]</a>    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">r&quot;&quot;&quot;**str**\ (*object*)</span>

<span class="sd">        Renvoie une version LaTeX de la :class:`Fraction`.</span>
<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.Fractions import Fraction</span>
<span class="sd">            &gt;&gt;&gt; str(Fraction(5,6))</span>
<span class="sd">            &#39;\\dfrac{5}{6}&#39;</span>
<span class="sd">            &gt;&gt;&gt; str(Fraction(&#39;-72*2&#39;, &#39;11*2&#39;, &#39;r&#39;))</span>
<span class="sd">            &#39;\\dfrac{-72_{\\times 2}}{11_{\\times 2}}&#39;</span>
<span class="sd">            &gt;&gt;&gt; str(Fraction(&#39;-72*2&#39;, &#39;11*2&#39;, &#39;s&#39;))</span>
<span class="sd">            &#39;\\dfrac{-72\\times \\cancel{2}}{11\\times \\cancel{2}}&#39;</span>

<span class="sd">        :rtype: string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">text</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="s">&quot;r&quot;</span><span class="p">:</span>
                <span class="n">text</span> <span class="o">=</span> <span class="s">r&quot;\dfrac{</span><span class="si">%s</span><span class="s">_{\times </span><span class="si">%s</span><span class="s">}}&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;*&quot;</span><span class="p">)))</span>
                <span class="n">text</span> <span class="o">+=</span> <span class="s">r&quot;{</span><span class="si">%s</span><span class="s">_{\times </span><span class="si">%s</span><span class="s">}}&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;*&#39;</span><span class="p">)))</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="s">&quot;s&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="n">ln</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;*&#39;</span><span class="p">)</span>
                    <span class="n">ld</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;*&#39;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                    <span class="n">lepgcd</span> <span class="o">=</span> <span class="n">pgcd</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>
                    <span class="n">ln</span><span class="p">,</span> <span class="n">ld</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">//</span> <span class="n">lepgcd</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">lepgcd</span><span class="p">)],</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">//</span> <span class="n">lepgcd</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">lepgcd</span><span class="p">)]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">u&#39;Cas non prévu : mélange str et int dans une fraction&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ln</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">ld</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">ln</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span>
                        <span class="n">ld</span><span class="p">[</span><span class="n">ld</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">ln</span><span class="p">[</span><span class="n">i</span><span class="p">])]</span> <span class="o">=</span> <span class="s">r&quot;\cancel{</span><span class="si">%s</span><span class="s">}&quot;</span> <span class="o">%</span> <span class="n">ln</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                        <span class="n">ln</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="s">r&quot;\cancel{</span><span class="si">%s</span><span class="s">}&quot;</span> <span class="o">%</span> <span class="n">ln</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">text</span> <span class="o">=</span> <span class="s">r&quot;\dfrac{</span><span class="si">%s</span><span class="s">}{</span><span class="si">%s</span><span class="s">}&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s">r&quot;\times &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ln</span><span class="p">),</span> <span class="s">r&quot;\times &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ld</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">text</span> <span class="o">=</span> <span class="s">r&quot;\dfrac{</span><span class="si">%s</span><span class="s">}{</span><span class="si">%s</span><span class="s">}&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="s">&quot;0&quot;</span>
        <span class="k">return</span> <span class="n">text</span>
</div>
<div class="viewcode-block" id="Fraction.__repr__"><a class="viewcode-back" href="../../../pyromaths.classes.Fractions.html#pyromaths.classes.Fractions.Fraction.__repr__">[docs]</a>    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;**repr**\ (*object*)</span>

<span class="sd">        Renvoie une chaîne de caractère représentant une :mod:`Fraction`</span>
<span class="sd">        évaluable pour créer un :mod:`Fraction`.</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.Fractions import Fraction</span>
<span class="sd">            &gt;&gt;&gt; repr(Fraction(5,6))</span>
<span class="sd">            &#39;Fraction(5, 6)&#39;</span>
<span class="sd">            &gt;&gt;&gt; repr(Fraction(&#39;-72*2&#39;, &#39;11*2&#39;, &#39;r&#39;))</span>
<span class="sd">            &#39;Fraction(&quot;-72*2&quot;, &quot;11*2&quot;, &quot;r&quot;)&#39;</span>
<span class="sd">            &gt;&gt;&gt; repr(Fraction(&#39;-72*2&#39;, &#39;11*2&#39;, &#39;s&#39;))</span>
<span class="sd">            &#39;Fraction(&quot;-72*2&quot;, &quot;11*2&quot;, &quot;s&quot;)&#39;</span>

<span class="sd">        :rtype: string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">num</span> <span class="o">=</span> <span class="s">&quot;</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">num</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%r</span><span class="s">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">den</span> <span class="o">=</span> <span class="s">&quot;</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">den</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%r</span><span class="s">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&quot;Fraction(</span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">, </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">den</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&quot;Fraction(</span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">den</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Fraction.__add__"><a class="viewcode-back" href="../../../pyromaths.classes.Fractions.html#pyromaths.classes.Fractions.Fraction.__add__">[docs]</a>    <span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">others</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*object*\ .\ **__add__**\ (*other*)</span>

<span class="sd">        ``p.__add__(q)`` est équivalent à ``p + q``  calcule la somme de deux fractions.</span>

<span class="sd">        *other* peut être une chaîne représentant une fraction, un entier ou un réel.</span>

<span class="sd">        &gt;&gt;&gt; from pyromaths.classes.Fractions import Fraction</span>
<span class="sd">        &gt;&gt;&gt; Fraction(2,5) + Fraction(2,10)</span>
<span class="sd">        &#39;Fraction(&quot;2*2&quot;, &quot;5*2&quot;, &quot;r&quot;)+Fraction(2, 10)&#39;</span>
<span class="sd">        &gt;&gt;&gt; Fraction(2,20) + Fraction(2,10)</span>
<span class="sd">        &#39;Fraction(2, 20)+Fraction(&quot;2*2&quot;, &quot;10*2&quot;, &quot;r&quot;)&#39;</span>
<span class="sd">        &gt;&gt;&gt; Fraction(5,10) + Fraction(2,10)</span>
<span class="sd">        Fraction(7, 10)</span>
<span class="sd">        &gt;&gt;&gt; Fraction(5,7) + Fraction(2,10)</span>
<span class="sd">        &#39;Fraction(&quot;5*10&quot;, &quot;7*10&quot;, &quot;r&quot;)+Fraction(&quot;2*7&quot;, &quot;10*7&quot;, &quot;r&quot;)&#39;</span>

<span class="sd">        :param: other</span>
<span class="sd">        :type: Fraction ou string</span>
<span class="sd">        :rtype: Fraction ou string</span>

<span class="sd">        **TODO :** Attention, 1+3/4 donne 1*4/1*4 + 3/4 à la place de 4/4+3/4. À corriger</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pyromaths.classes.PolynomesCollege</span> <span class="kn">import</span> <span class="n">Polynome</span>
        <span class="n">lother</span><span class="p">,</span> <span class="n">lden</span><span class="p">,</span> <span class="n">traiter</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">:</span> <span class="n">traiter</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">detailler</span><span class="p">,</span> <span class="n">var</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">others</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">other</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Polynome</span><span class="p">):</span>
                <span class="n">var</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">var</span>
                <span class="k">if</span> <span class="n">detailler</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">other</span><span class="o">.</span><span class="n">detailler</span><span class="p">:</span> <span class="n">detailler</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="k">else</span><span class="p">:</span> <span class="n">detailler</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">detailler</span>
                <span class="n">lother</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                    <span class="n">lother</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Fraction</span><span class="p">(</span><span class="n">other</span><span class="p">))</span>
                    <span class="n">lden</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Fraction</span><span class="p">):</span>
                <span class="n">lother</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">code</span><span class="p">:</span> <span class="n">traiter</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">try</span><span class="p">:</span> <span class="n">lden</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">d</span><span class="p">))</span>
                <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span> <span class="n">lden</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">u&#39;Format incorrect : </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">other</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">var</span><span class="p">:</span>
            <span class="bp">self</span> <span class="o">=</span> <span class="n">Polynome</span><span class="p">([[</span><span class="bp">self</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span> <span class="n">var</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="n">detailler</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lother</span><span class="p">)):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lother</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">Polynome</span><span class="p">):</span> <span class="n">lother</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">Polynome</span><span class="p">([[</span><span class="n">lother</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="mi">0</span><span class="p">]],</span> <span class="n">var</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="n">detailler</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Polynome</span><span class="o">.</span><span class="n">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">lother</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">traiter</span><span class="p">:</span>
            <span class="n">lfrac</span> <span class="o">=</span> <span class="p">[</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">traitement</span><span class="p">())]</span>
            <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">:</span>
                <span class="n">lfrac</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">traitement</span><span class="p">()))</span>
            <span class="k">return</span> <span class="s">&quot;+&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lfrac</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">lother</span><span class="p">:</span> <span class="k">return</span> <span class="bp">self</span>  <span class="c"># On a ajouté 0</span>
        <span class="n">leppcm</span> <span class="o">=</span> <span class="n">ppcm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span> <span class="o">*</span><span class="n">lden</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">==</span> <span class="n">leppcm</span><span class="p">:</span>
            <span class="c"># Vérifions si toutes les fractions ont le même dénominateur</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">lden</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">d</span><span class="p">[</span><span class="n">leppcm</span><span class="p">]</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">lden</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span> <span class="n">num</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span> <span class="n">num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span>
                <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span> <span class="n">num</span> <span class="o">+=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span> <span class="n">num</span> <span class="o">+=</span> <span class="n">other</span><span class="o">.</span><span class="n">n</span>
                <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">leppcm</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">:</span> <span class="n">lfrac</span> <span class="o">=</span> <span class="p">[</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">choix_denominateur</span><span class="p">(</span><span class="n">leppcm</span><span class="p">))]</span>
        <span class="k">else</span><span class="p">:</span> <span class="n">lfrac</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">:</span> <span class="n">lfrac</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">choix_denominateur</span><span class="p">(</span><span class="n">leppcm</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">lfrac</span><span class="p">:</span> <span class="k">return</span> <span class="s">&quot;+&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lfrac</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="s">&quot;0&quot;</span>
</div>
<div class="viewcode-block" id="Fraction.choix_denominateur"><a class="viewcode-back" href="../../../pyromaths.classes.Fractions.html#pyromaths.classes.Fractions.Fraction.choix_denominateur">[docs]</a>    <span class="k">def</span> <span class="nf">choix_denominateur</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">denominateur</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Écrit la fraction self avec le dénominateur denominateur</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">denominateur</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">*</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="n">denominateur</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">),</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">*</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span> <span class="n">denominateur</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">),</span> <span class="s">&quot;r&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span>
</div>
<div class="viewcode-block" id="Fraction.__radd__"><a class="viewcode-back" href="../../../pyromaths.classes.Fractions.html#pyromaths.classes.Fractions.Fraction.__radd__">[docs]</a>    <span class="k">def</span> <span class="nf">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*object*\ .\ **__radd__**\ (*other*)</span>

<span class="sd">        ``p.__radd__(q)`` est équivalent à ``p + q``  calcule la somme de l&#39;objet p avec la fraction q</span>

<span class="sd">        *other* peut être une chaîne représentant un entier ou un réel.</span>

<span class="sd">        &gt;&gt;&gt; from pyromaths.classes.Fractions import Fraction</span>
<span class="sd">        &gt;&gt;&gt; 3 + Fraction(2,5)</span>
<span class="sd">        &#39;Fraction(&quot;3*5&quot;, &quot;1*5&quot;, &quot;r&quot;)+Fraction(2, 5)&#39;</span>

<span class="sd">        :param: other</span>
<span class="sd">        :type: real ou integer</span>
<span class="sd">        :rtype: string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">other</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">:</span> <span class="k">return</span> <span class="bp">self</span>
        <span class="k">if</span> <span class="bp">self</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">:</span> <span class="k">return</span> <span class="n">other</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span> <span class="k">return</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">+</span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="s">&#39;</span><span class="si">%r</span><span class="s">+</span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span>
</div>
<div class="viewcode-block" id="Fraction.__sub__"><a class="viewcode-back" href="../../../pyromaths.classes.Fractions.html#pyromaths.classes.Fractions.Fraction.__sub__">[docs]</a>    <span class="k">def</span> <span class="nf">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">others</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*object*\ .\ **__sub__**\ (*other*)</span>

<span class="sd">        ``p.__sub__(q)`` est équivalent à ``p - q``  calcule la différence de deux fractions.</span>

<span class="sd">        *other* peut être une chaîne représentant une fraction, un entier ou un réel.</span>

<span class="sd">        Pour plus de détails, voir :py:func:`__add__`&quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pyromaths.classes.PolynomesCollege</span> <span class="kn">import</span> <span class="n">Polynome</span>
        <span class="n">lother</span><span class="p">,</span> <span class="n">lden</span><span class="p">,</span> <span class="n">traiter</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">:</span> <span class="n">traiter</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">detailler</span><span class="p">,</span> <span class="n">var</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="s">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">others</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">other</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Polynome</span><span class="p">):</span>
                <span class="n">var</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">var</span>
                <span class="n">detailler</span> <span class="o">=</span> <span class="n">detailler</span> <span class="ow">and</span> <span class="n">other</span><span class="o">.</span><span class="n">detailler</span>
                <span class="n">lother</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                    <span class="n">lother</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Fraction</span><span class="p">(</span><span class="n">other</span><span class="p">))</span>
                    <span class="n">lden</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Fraction</span><span class="p">):</span>
                <span class="n">lother</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">code</span><span class="p">:</span> <span class="n">traiter</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">try</span><span class="p">:</span> <span class="n">lden</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">d</span><span class="p">))</span>
                <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span> <span class="n">lden</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">u&#39;Format incorrect : </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">other</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">var</span><span class="p">:</span>
            <span class="bp">self</span> <span class="o">=</span> <span class="n">Polynome</span><span class="p">([[</span><span class="bp">self</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span> <span class="n">var</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="n">detailler</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lother</span><span class="p">)):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lother</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">Polynome</span><span class="p">):</span> <span class="n">lother</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">Polynome</span><span class="p">([[</span><span class="n">lother</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="mi">0</span><span class="p">]],</span> <span class="n">var</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="n">detailler</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Polynome</span><span class="o">.</span><span class="n">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">lother</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">traiter</span><span class="p">:</span>
            <span class="n">lfrac</span> <span class="o">=</span> <span class="p">[</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">traitement</span><span class="p">())]</span>
            <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">:</span>
                <span class="n">lfrac</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">traitement</span><span class="p">()))</span>
            <span class="k">return</span> <span class="s">&quot;-&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lfrac</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">lother</span><span class="p">:</span> <span class="k">return</span> <span class="bp">self</span>  <span class="c"># On a ajouté 0</span>
        <span class="n">leppcm</span> <span class="o">=</span> <span class="n">ppcm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span> <span class="o">*</span><span class="n">lden</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">==</span> <span class="n">leppcm</span><span class="p">:</span>
            <span class="c"># Vérifions si toutes les fractions ont le même dénominateur</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">lden</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">d</span><span class="p">[</span><span class="n">leppcm</span><span class="p">]</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">lden</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span> <span class="n">num</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span> <span class="n">num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span>
                <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span> <span class="n">num</span> <span class="o">+=</span> <span class="o">-</span><span class="nb">eval</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span> <span class="n">num</span> <span class="o">+=</span> <span class="o">-</span><span class="n">other</span><span class="o">.</span><span class="n">n</span>
                <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">leppcm</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">:</span> <span class="n">lfrac</span> <span class="o">=</span> <span class="p">[</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">choix_denominateur</span><span class="p">(</span><span class="n">leppcm</span><span class="p">))]</span>
        <span class="k">else</span><span class="p">:</span> <span class="n">lfrac</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">:</span> <span class="n">lfrac</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">choix_denominateur</span><span class="p">(</span><span class="n">leppcm</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">lfrac</span><span class="p">:</span> <span class="k">return</span> <span class="s">&quot;-&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lfrac</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="s">&quot;0&quot;</span>
</div>
<div class="viewcode-block" id="Fraction.__rsub__"><a class="viewcode-back" href="../../../pyromaths.classes.Fractions.html#pyromaths.classes.Fractions.Fraction.__rsub__">[docs]</a>    <span class="k">def</span> <span class="nf">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*object*\ .\ **__rsub__**\ (*other*)</span>

<span class="sd">        ``p.__rsub__(q)`` est équivalent à ``p - q``  calcule la différence de l&#39;objet p par la fraction q.</span>

<span class="sd">        *other* peut être un entier ou un réel.</span>

<span class="sd">        Pour plus de détails, voir :py:func:`__radd__`&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span>
</div>
<div class="viewcode-block" id="Fraction.__mul__"><a class="viewcode-back" href="../../../pyromaths.classes.Fractions.html#pyromaths.classes.Fractions.Fraction.__mul__">[docs]</a>    <span class="k">def</span> <span class="nf">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">others</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*object*\ .\ **__mul__**\ (*other*)</span>

<span class="sd">        ``p.__mul__(q)`` est équivalent à ``p * q``  calcule le produit deux fractions.</span>

<span class="sd">        *other* peut être une chaîne représentant une fraction, un entier ou un réel.</span>

<span class="sd">        &gt;&gt;&gt; from pyromaths.classes.Fractions import Fraction</span>
<span class="sd">        &gt;&gt;&gt; Fraction(2,5) * Fraction(2,10)</span>
<span class="sd">        Fraction(&quot;2*2&quot;, &quot;5*2*5&quot;, &quot;s&quot;)</span>
<span class="sd">        &gt;&gt;&gt; Fraction(2,5) * 4</span>
<span class="sd">        Fraction(8, 5)</span>
<span class="sd">        &gt;&gt;&gt; Fraction(63,20) * Fraction(8,27)</span>
<span class="sd">        Fraction(&quot;9*7*4*2&quot;, &quot;4*5*9*3&quot;, &quot;s&quot;)</span>
<span class="sd">        &gt;&gt;&gt; Fraction(24,12) * 12</span>
<span class="sd">        Fraction(&quot;24*12&quot;, &quot;12*1&quot;, &quot;s&quot;)</span>
<span class="sd">        &gt;&gt;&gt; 12*Fraction(24,12)</span>
<span class="sd">        Fraction(&quot;12*24&quot;, &quot;1*12&quot;, &quot;s&quot;)</span>

<span class="sd">        :param: other</span>
<span class="sd">        :type: Fraction ou string</span>
<span class="sd">        :rtype: Fraction ou string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pyromaths.classes.PolynomesCollege</span> <span class="kn">import</span> <span class="n">Polynome</span>
        <span class="kn">from</span> <span class="nn">pyromaths.classes.Polynome</span> <span class="kn">import</span> <span class="n">Polynome</span> <span class="k">as</span> <span class="n">PolynomeLycee</span>
        <span class="kn">from</span> <span class="nn">.Racine</span> <span class="kn">import</span> <span class="n">RacineDegre2</span>

        <span class="k">if</span> <span class="bp">self</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="mi">0</span>
        <span class="bp">self</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>  <span class="c"># Pour contourner le cas où self = Fraction(Fraction(1, 1), 1)</span>
        <span class="n">lother</span><span class="p">,</span> <span class="n">lnum</span><span class="p">,</span> <span class="n">lden</span><span class="p">,</span> <span class="n">detailler</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">traiter</span><span class="p">,</span> <span class="n">lycee</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">],</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">],</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">],</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">False</span>
        <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">others</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">other</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Polynome</span><span class="p">):</span>
                <span class="n">var</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">var</span>
                <span class="k">if</span> <span class="n">detailler</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">other</span><span class="o">.</span><span class="n">detailler</span><span class="p">:</span> <span class="n">detailler</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="k">else</span><span class="p">:</span> <span class="n">detailler</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">detailler</span>
                <span class="n">lother</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">PolynomeLycee</span><span class="p">):</span>
                <span class="n">var</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">var</span>
                <span class="n">lycee</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="n">lother</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="n">lden</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">lnum</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
                <span class="n">lother</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Fraction</span><span class="p">(</span><span class="n">other</span><span class="p">))</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Fraction</span><span class="p">):</span>
                <span class="n">lother</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">code</span><span class="p">:</span> <span class="n">traiter</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">try</span><span class="p">:</span> <span class="n">lden</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">d</span><span class="p">))</span>
                <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span> <span class="n">lden</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span> <span class="n">lnum</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">n</span><span class="p">))</span>
                <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span> <span class="n">lnum</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">RacineDegre2</span><span class="p">):</span>
                <span class="n">lother</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
                <span class="n">lden</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">denominateur</span><span class="p">)</span>
                <span class="n">lnum</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">numerateur</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">u&#39;Format incorrect : </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">other</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">var</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">lycee</span><span class="p">:</span>
                <span class="bp">self</span> <span class="o">=</span> <span class="n">PolynomeLycee</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span><span class="bp">self</span><span class="p">},</span> <span class="n">var</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">PolynomeLycee</span><span class="o">.</span><span class="n">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span> <span class="o">=</span> <span class="n">Polynome</span><span class="p">([[</span><span class="bp">self</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span> <span class="n">var</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="n">detailler</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lother</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lother</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">Polynome</span><span class="p">):</span> <span class="n">lother</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">Polynome</span><span class="p">([[</span><span class="n">lother</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="mi">0</span><span class="p">]],</span> <span class="n">var</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="n">detailler</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Polynome</span><span class="o">.</span><span class="n">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">lother</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">traiter</span><span class="p">:</span>
            <span class="n">lfrac</span> <span class="o">=</span> <span class="p">[</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">traitement</span><span class="p">())]</span>
            <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">lother</span><span class="p">:</span>
                <span class="n">lfrac</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">traitement</span><span class="p">()))</span>
            <span class="k">return</span> <span class="s">&quot;*&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lfrac</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span> <span class="k">pass</span>
        <span class="n">s</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">pgcd</span><span class="p">(</span><span class="nb">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">lnum</span><span class="p">),</span> <span class="nb">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">lden</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="nb">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">lnum</span><span class="p">),</span> <span class="nb">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">lden</span><span class="p">))</span>
        <span class="n">lepgcd</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">den</span> <span class="o">=</span> <span class="n">s</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">lnum</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">lepgcd</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">lepgcd</span> <span class="ow">in</span> <span class="n">lnum</span><span class="p">:</span>
                <span class="n">num</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;*&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">repr</span><span class="p">(</span><span class="n">lnum</span><span class="p">[</span><span class="n">k</span><span class="p">])</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">lnum</span><span class="p">))]))</span>
                <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">lepgcdtmp</span> <span class="o">=</span> <span class="n">pgcd</span><span class="p">(</span><span class="n">lnum</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">lepgcd</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">lepgcdtmp</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span> <span class="n">num</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%r</span><span class="s">*</span><span class="si">%r</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">lepgcdtmp</span><span class="p">,</span> <span class="n">lnum</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">//</span> <span class="n">lepgcdtmp</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span> <span class="n">num</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%r</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">lnum</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">lepgcd</span> <span class="o">=</span> <span class="n">lepgcd</span> <span class="o">/</span> <span class="n">lepgcdtmp</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">i</span><span class="p">,</span> <span class="n">lepgcd</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">s</span>
        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">lden</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">lepgcd</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">lepgcd</span> <span class="ow">in</span> <span class="n">lden</span><span class="p">:</span>
                <span class="n">den</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;*&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">repr</span><span class="p">(</span><span class="n">lden</span><span class="p">[</span><span class="n">k</span><span class="p">])</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">lden</span><span class="p">))]))</span>
                <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">lepgcdtmp</span> <span class="o">=</span> <span class="n">pgcd</span><span class="p">(</span><span class="n">lden</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">lepgcd</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">lepgcdtmp</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span> <span class="n">den</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%r</span><span class="s">*</span><span class="si">%r</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">lepgcdtmp</span><span class="p">,</span> <span class="n">lden</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">//</span> <span class="n">lepgcdtmp</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span> <span class="n">den</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%r</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">lden</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">lepgcd</span> <span class="o">=</span> <span class="n">lepgcd</span> <span class="o">/</span> <span class="n">lepgcdtmp</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">num</span><span class="p">,</span> <span class="n">den</span> <span class="o">=</span> <span class="s">&quot;*&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">num</span><span class="p">),</span> <span class="s">&quot;*&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">den</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">num</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;1*&quot;</span><span class="p">:</span> <span class="n">num</span> <span class="o">=</span> <span class="n">num</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
        <span class="k">while</span> <span class="s">&quot;*1*&quot;</span> <span class="ow">in</span> <span class="n">num</span><span class="p">:</span> <span class="n">num</span> <span class="o">=</span> <span class="n">num</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;*1*&quot;</span><span class="p">,</span> <span class="s">&quot;*&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">num</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span> <span class="o">==</span> <span class="s">&quot;*1&quot;</span><span class="p">:</span> <span class="n">num</span> <span class="o">=</span> <span class="n">num</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="nb">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">lnum</span><span class="p">):</span>
            <span class="c"># laisser un *1 ou 1* selon</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="n">num</span> <span class="o">=</span> <span class="s">&quot;1*&quot;</span> <span class="o">+</span> <span class="n">num</span>
            <span class="k">else</span><span class="p">:</span> <span class="n">num</span> <span class="o">+=</span> <span class="s">&quot;*1&quot;</span>
        <span class="k">while</span> <span class="n">den</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;1*&quot;</span><span class="p">:</span> <span class="n">den</span> <span class="o">=</span> <span class="n">den</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
        <span class="k">while</span> <span class="s">&quot;*1*&quot;</span> <span class="ow">in</span> <span class="n">den</span><span class="p">:</span> <span class="n">den</span> <span class="o">=</span> <span class="n">den</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;*1*&quot;</span><span class="p">,</span> <span class="s">&quot;*&quot;</span> <span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">den</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span> <span class="o">==</span> <span class="s">&quot;*1&quot;</span><span class="p">:</span> <span class="n">den</span> <span class="o">=</span> <span class="n">den</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="nb">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">lden</span><span class="p">):</span>
            <span class="c"># laisser un *1</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="n">den</span> <span class="o">=</span> <span class="s">&quot;1*&quot;</span> <span class="o">+</span> <span class="n">den</span>
            <span class="k">else</span><span class="p">:</span> <span class="n">den</span> <span class="o">+=</span> <span class="s">&quot;*1&quot;</span>

        <span class="k">if</span> <span class="s">&quot;*&quot;</span> <span class="ow">in</span> <span class="n">num</span><span class="p">:</span> <span class="n">num</span> <span class="o">=</span> <span class="n">num</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="s">&quot;*&quot;</span> <span class="ow">in</span> <span class="n">den</span><span class="p">:</span> <span class="n">den</span> <span class="o">=</span> <span class="n">den</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">den</span><span class="p">,</span> <span class="s">&quot;s&quot;</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="Fraction.__rmul__"><a class="viewcode-back" href="../../../pyromaths.classes.Fractions.html#pyromaths.classes.Fractions.Fraction.__rmul__">[docs]</a>    <span class="k">def</span> <span class="nf">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*object*\ .\ **__rmul__**\ (*other*)</span>

<span class="sd">        ``p.__rmul__(q)`` est équivalent à ``p * q``  calcule le produit de l&#39;objet p par la fraction q.</span>

<span class="sd">        *other* peut être un entier ou un réel.</span>

<span class="sd">        Pour plus de détails, voir :py:func:`__radd__`&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span>

    <span class="c"># def __truediv__(self, fraction): # pour Python 3</span></div>
<div class="viewcode-block" id="Fraction.__div__"><a class="viewcode-back" href="../../../pyromaths.classes.Fractions.html#pyromaths.classes.Fractions.Fraction.__div__">[docs]</a>    <span class="k">def</span> <span class="nf">__div__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*object*\ .\ **__div__**\ (*other*)</span>

<span class="sd">        ``p.__div__(q)`` est équivalent à ``p / q``  calcule le quotient de deux fractions.</span>

<span class="sd">        *other* peut être une chaîne représentant une fraction, un entier ou un réel.</span>

<span class="sd">        &gt;&gt;&gt; from pyromaths.classes.Fractions import Fraction</span>
<span class="sd">        &gt;&gt;&gt; Fraction(2,5) / Fraction(10,2)</span>
<span class="sd">        &#39;Fraction(2, 5)*Fraction(2, 10)&#39;</span>
<span class="sd">        &gt;&gt;&gt; Fraction(2,5) / 4</span>
<span class="sd">        &#39;Fraction(2, 5)*Fraction(1, 4)&#39;</span>

<span class="sd">        :param: other</span>
<span class="sd">        :type: Fraction ou string</span>
<span class="sd">        :rtype: Fraction ou string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">return</span> <span class="s">&quot;</span><span class="si">%r</span><span class="s">*</span><span class="si">%r</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">~</span><span class="n">other</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Fraction.__rdiv__"><a class="viewcode-back" href="../../../pyromaths.classes.Fractions.html#pyromaths.classes.Fractions.Fraction.__rdiv__">[docs]</a>    <span class="k">def</span> <span class="nf">__rdiv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;*object*\ .\ **__rdiv__**\ (*other*)</span>

<span class="sd">        ``p.__rdiv__(q)`` est équivalent à ``p / q``  calcule le produit de l&#39;objet p par la fraction q.</span>

<span class="sd">        *other* peut être un entier ou un réel.</span>

<span class="sd">        Pour plus de détails, voir :py:func:`__radd__`&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s">&quot;</span><span class="si">%r</span><span class="s">*</span><span class="si">%r</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">~</span><span class="n">other</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Fraction.__invert__"><a class="viewcode-back" href="../../../pyromaths.classes.Fractions.html#pyromaths.classes.Fractions.Fraction.__invert__">[docs]</a>    <span class="k">def</span> <span class="nf">__invert__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;**__invert__**\ (*self*)</span>

<span class="sd">        ``__invert__(p)`` est équivalent à ``~p`` calcule l&#39;inverse de la fraction p.</span>

<span class="sd">        &gt;&gt;&gt; from pyromaths.classes.Fractions import Fraction</span>
<span class="sd">        &gt;&gt;&gt; ~Fraction(8,27)</span>
<span class="sd">        Fraction(27, 8)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Fraction.__neg__"><a class="viewcode-back" href="../../../pyromaths.classes.Fractions.html#pyromaths.classes.Fractions.Fraction.__neg__">[docs]</a>    <span class="k">def</span> <span class="nf">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;**__neg__**\ (*self*)</span>

<span class="sd">        ``__neg__(p)`` est équivalent à ``-p`` calcule l&#39;opposé de la fraction p.</span>

<span class="sd">        &gt;&gt;&gt; from pyromaths.classes.Fractions import Fraction</span>
<span class="sd">        &gt;&gt;&gt; -Fraction(8,27)</span>
<span class="sd">        Fraction(-8, 27)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">:</span> <span class="bp">self</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">traitement</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Fraction.__pos__"><a class="viewcode-back" href="../../../pyromaths.classes.Fractions.html#pyromaths.classes.Fractions.Fraction.__pos__">[docs]</a>    <span class="k">def</span> <span class="nf">__pos__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;**__pos__**\ (*self*)</span>

<span class="sd">        ``__pos__(p)`` est équivalent à ``+p`` Renvoie la fraction p.</span>

<span class="sd">        &gt;&gt;&gt; from pyromaths.classes.Fractions import Fraction</span>
<span class="sd">        &gt;&gt;&gt; +Fraction(8,27)</span>
<span class="sd">        Fraction(8, 27)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Fraction.__pow__"><a class="viewcode-back" href="../../../pyromaths.classes.Fractions.html#pyromaths.classes.Fractions.Fraction.__pow__">[docs]</a>    <span class="k">def</span> <span class="nf">__pow__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;**__pow__**\ (*self*, *n*)</span>

<span class="sd">        ``p__pow__(q)`` est équivalent à ``p**q`` calcule p à la puissance q.</span>

<span class="sd">        &gt;&gt;&gt; from pyromaths.classes.Fractions import Fraction</span>
<span class="sd">        &gt;&gt;&gt; Fraction(2,3)**4</span>
<span class="sd">        Fraction(16, 81)</span>

<span class="sd">        :param: n</span>
<span class="sd">        :type: Integer</span>
<span class="sd">        :rtype: Fraction</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">**</span> <span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">**</span> <span class="n">n</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">__trunc__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span>

    <span class="k">def</span> <span class="nf">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">d</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">d</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">n</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="k">return</span> <span class="ow">not</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">d</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">d</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">d</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">n</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="k">return</span> <span class="ow">not</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">d</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Fraction</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">reduit</span><span class="p">()</span><span class="o">.</span><span class="n">n</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">reduit</span><span class="p">()</span><span class="o">.</span><span class="n">d</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">reduit</span><span class="p">()</span><span class="o">.</span><span class="n">d</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">reduit</span><span class="p">()</span><span class="o">.</span><span class="n">n</span>

    <span class="k">def</span> <span class="nf">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">d</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">n</span>

    <span class="k">def</span> <span class="nf">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">d</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">d</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">n</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="k">return</span> <span class="ow">not</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">d</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">d</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">d</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">n</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="k">return</span> <span class="ow">not</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">d</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__float__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mf">1.0</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span>

    <span class="k">def</span> <span class="nf">__int__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">assert</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">==</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)),</span> <span class="s">&#39;La fraction n</span><span class="se">\&#39;</span><span class="s">est pas un nombre entier !&#39;</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AssertionError</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>

<div class="viewcode-block" id="Fraction.reduit"><a class="viewcode-back" href="../../../pyromaths.classes.Fractions.html#pyromaths.classes.Fractions.Fraction.reduit">[docs]</a>    <span class="k">def</span> <span class="nf">reduit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;**reduit**\ (*object*)</span>

<span class="sd">        Retourne une version réduite de la fraction, ie calcule le numérateur et le dénominateur</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.Fractions import Fraction</span>
<span class="sd">            &gt;&gt;&gt; Fraction.reduit(Fraction(2*4,5*4))</span>
<span class="sd">            Fraction(8, 20)</span>
<span class="sd">            &gt;&gt;&gt; Fraction.reduit(Fraction(&#39;2*4&#39;, &#39;5*4&#39;))</span>
<span class="sd">            Fraction(8, 20)</span>

<span class="sd">        :param type: Fraction</span>
<span class="sd">        :rtype: Fraction</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Fraction.simplifie"><a class="viewcode-back" href="../../../pyromaths.classes.Fractions.html#pyromaths.classes.Fractions.Fraction.simplifie">[docs]</a>    <span class="k">def</span> <span class="nf">simplifie</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;**simplifie**\ (*object*)</span>

<span class="sd">        Retourne une version irréductible de la fraction</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.Fractions import Fraction</span>
<span class="sd">            &gt;&gt;&gt; Fraction.simplifie(Fraction(2*4,5*4))</span>
<span class="sd">            Fraction(2, 5)</span>
<span class="sd">            &gt;&gt;&gt; Fraction.simplifie(Fraction(&#39;2*4&#39;,&#39;5*4&#39;))</span>
<span class="sd">            Fraction(2, 5)</span>

<span class="sd">        :param type: Fraction</span>
<span class="sd">        :rtype: Fraction</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">conv</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>
            <span class="n">conv</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>
            <span class="n">conv</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">conv</span> <span class="p">:</span> <span class="bp">self</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">pgcd</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">//</span> <span class="n">s</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">//</span> <span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Fraction.decompose"><a class="viewcode-back" href="../../../pyromaths.classes.Fractions.html#pyromaths.classes.Fractions.Fraction.decompose">[docs]</a>    <span class="k">def</span> <span class="nf">decompose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;**decompose**\ (*object*)</span>

<span class="sd">        Retourne une décomposition de la fraction afin de la simplifier</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.Fractions import Fraction</span>
<span class="sd">            &gt;&gt;&gt; Fraction.decompose(Fraction(8,20))</span>
<span class="sd">            Fraction(&quot;2*4&quot;, &quot;5*4&quot;, &quot;s&quot;)</span>

<span class="sd">        :param type: Fraction</span>
<span class="sd">        :rtype: Fraction</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lepgcd</span> <span class="o">=</span> <span class="n">pgcd</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">lepgcd</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">*</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">//</span> <span class="n">lepgcd</span><span class="p">,</span> <span class="n">lepgcd</span><span class="p">),</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">*</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">//</span> <span class="n">lepgcd</span><span class="p">,</span> <span class="n">lepgcd</span><span class="p">),</span> <span class="s">&quot;s&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Fraction.traitement"><a class="viewcode-back" href="../../../pyromaths.classes.Fractions.html#pyromaths.classes.Fractions.Fraction.traitement">[docs]</a>    <span class="k">def</span> <span class="nf">traitement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">final</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;**traitement**\ (*object*,\ *self*)</span>

<span class="sd">        Finit la mise au même dénominatuer ou la simplicfication de la fraction.</span>
<span class="sd">        Si *final* est vrai, alors essaie de simplifier la fraction.</span>

<span class="sd">            &gt;&gt;&gt; from pyromaths.classes.Fractions import Fraction</span>
<span class="sd">            &gt;&gt;&gt; Fraction(&quot;3*4&quot;, &quot;3*7&quot;, &quot;r&quot;).traitement()</span>
<span class="sd">            Fraction(12, 21)</span>
<span class="sd">            &gt;&gt;&gt; Fraction(&quot;3*4&quot;, &quot;3*7&quot;, &quot;s&quot;).traitement()</span>
<span class="sd">            Fraction(4, 7)</span>
<span class="sd">            &gt;&gt;&gt; Fraction(12, 21).traitement()</span>
<span class="sd">            Fraction(12, 21)</span>
<span class="sd">            &gt;&gt;&gt; Fraction(12, 21).traitement(True)</span>
<span class="sd">            Fraction(&quot;4*3&quot;, &quot;7*3&quot;, &quot;s&quot;)</span>

<span class="sd">        :param: final</span>
<span class="sd">        :type: boolean</span>
<span class="sd">        :rtype: Fraction</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="s">&quot;r&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span> <span class="n">n</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span> <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span> <span class="n">d</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span> <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span>
            <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="s">&quot;s&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span> <span class="n">n</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span> <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span> <span class="n">d</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span> <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">pgcd</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">n</span> <span class="o">//</span> <span class="n">s</span><span class="p">,</span> <span class="n">d</span> <span class="o">//</span> <span class="n">s</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">final</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decompose</span><span class="p">()</span>
        <span class="s">&quot;Pas de traitement spécifique nécessaire&quot;</span>
        <span class="k">return</span> <span class="bp">self</span></div></div>
</pre></div>

      </div>
      <div class="bottomnav">
      
        <p>
        <a class="uplink" href="../../../index.html">Contenu</a>
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2013, Jérôme Ortais.
      Créé avec <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>